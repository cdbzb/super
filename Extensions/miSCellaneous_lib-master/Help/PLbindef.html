<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1187.4">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Helvetica; min-height: 20.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Helvetica; color: #0000ee}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; min-height: 19.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 19.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Monaco; min-height: 19.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 17.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 17.0px Helvetica; min-height: 20.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 19.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Monaco; min-height: 22.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #cd1c00}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #0433ff}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 19.0px Helvetica; min-height: 23.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #0326cb}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #008300}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #ff7c00}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #cd1c00; min-height: 19.0px}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Monaco; color: #000000}
span.s1 {font: 23.0px Helvetica}
span.s2 {color: #000000}
span.s3 {text-decoration: underline}
span.s4 {text-decoration: underline ; color: #042eee}
span.s5 {color: #0326cb}
span.s6 {color: #008300}
span.s7 {color: #0433ff}
span.s8 {color: #ff7c00}
span.s9 {color: #434ccb}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>PLbindef<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>wrapper for Pbindef which allows replacement in object prototyping style</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s2"><b>Part of:</b> <a href="miSCellaneous.html"><span class="s3">miSCellaneous</span></a></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: Pbindef</b></p>
<p class="p4"><br></p>
<p class="p1">PLbindef works like a normal Pbindef and, like the latter, uses Pdef's global bookkeeping, but replacement of key streams can be done in object prototyping style with a dedicated PLbindefEnvironment, which also holds player methods. This Environment is itself assigned to the PLbindef's name in an Environment of choice, by default the current Environment. Setting can thus be done in very condensed syntax, also in combination with EventShortcuts.</p>
<p class="p2"><br></p>
<p class="p1"><b>NOTE: </b>PLbindefs are registered globally in the same Dictionary as Pdefs, Pbindefs and PLbindefPars. It's recommended to do cleanup with 'clear' after using PLbindef / PLbindefPar as in examples below. Otherwise unwanted or strange behaviour might be caused by leftover sources when playing a new PLbindef / PLbindefPar example with same key. With SC &gt;= 3.7 occasional posts of the default parent event occur with Pbindef, so also with PLbindef. I didn't notice any different other behaviour though.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><span class="s2"><b>See also: </b><a href="PLx suite.html"><span class="s3">PLx suite</span></a>, <a href="PLbindefPar.html"><span class="s3">PLbindefPar</span></a>, <a href="PLbindefEnvironment.html"><span class="s3">PLbindefEnvironment</span></a>, <a href="PLbindefParEnvironment.html"><span class="s3">PLbindefParEnvironment</span></a>, <a href="EventShortcuts.html"><span class="s4">EventShortcuts</span></a>, <a href="PLx and live coding with Strings.html"><span class="s4">PLx and live coding with Strings</span></a></span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*new (...args)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Creates a new PLbindef object. First arg should be the key, followed by key/value pairs for the Pbindef. The last arg can be an optional environment which determines where the corresponding PLbindefEnvironment should be stored, by default this is the current Environment at instantiation time.</p>
<p class="p8"><br></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><b>Instance Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clear</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>As with Pbindef: stop, but in addition remove name entry from <b>refEnvir </b>and clear sourceEnvir.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>sourceEnvir</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Getter for PLbindef's PLbindefEnvironment.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>refEnvir</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Getter for the Environment where PLbindef's PLbindefEnvironment is associated with PLbindef's key.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><br></p>
<p class="p8"><br></p>
<p class="p9"><b>Examples</b></p>
<p class="p10"><br></p>
<p class="p11">// synthdefs to play with</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\noise_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, rq = 0.1, amp = 0.1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">WhiteNoise</span>.ar } ! 2;</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = <span class="s5">BPF</span>.ar(sig, freq, rq) *</p>
<p class="p12"><span class="Apple-converted-space">        </span><span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2) *</p>
<p class="p12"><span class="Apple-converted-space">        </span>(rq ** -1) * (250 / (freq ** 0.8));</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p12">}).add;</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\sin_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, amp = 0.1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">SinOsc</span>.ar(freq, <span class="s5">Rand</span>(0, 2pi)) } ! 2;</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = sig * <span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2);</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p12">}).add;</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\saw_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, amp = 0.1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">VarSaw</span>.ar(freq, <span class="s5">Rand</span>(0, 1)) } ! 2;</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = sig * <span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2);</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p12">}).add;</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p9"><b>Ex.1) Setting key streams</b></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11">// store PLbindef under key \x</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\x</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\sin_grain<span class="s2">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\dur</span>, 0.2,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\midinote</span>, <span class="s5">Pwhite</span>(60, 90)</p>
<p class="p12">)</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p11">// Environment has been made and assigned to the variable ~x in currentEnvironment, check</p>
<p class="p4"><br></p>
<p class="p17">~x</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// now the Environment can also be treated as a player</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.play</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// set params while playing</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.att = <span class="s5">Pwhite</span>(0.01, 0.2)</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.midinote = 75</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.att = 0.01</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.dur = 0.02</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.midinote = <span class="s5">Pbrown</span>(60, 90, 1.5)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// pause</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.stop</p>
<p class="p4"><br></p>
<p class="p11">// resume</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.play</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// use method 'value' for parallel setting</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.(<span class="s6">\dur</span>, 0.05, <span class="s6">\midinote</span>, <span class="s5">Pwhite</span>(70.0, 72))</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.stop</p>
<p class="p4"><br></p>
<p class="p11">// cleanup</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~x</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p18"><br></p>
<p class="p9"><b>Ex.2) PLbindef with EventShortcuts</b></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11">// syntax can be more condensed with EventShortcuts, turn it on, post defaults</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on</span></p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.postCurrent</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\u</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, </span>\saw_grain<span class="s2">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.2,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, <span class="s5">Pwhite</span>(60, 90)</p>
<p class="p12">)</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.play</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.d = 0.1</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.m = <span class="s5">Pn</span>(<span class="s5">Plazy</span> { <span class="s5">Pseries</span>(rrand(50, 70), 1.5, 20) })</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.m = <span class="s8">~u</span>.m + [0, 4, 7]</p>
<p class="p4"><br></p>
<p class="p16"><span class="s8">~u</span><span class="s2">.i = </span><span class="s5">PLseq</span><span class="s2">([</span>\sin_grain<span class="s2">, </span>\saw_grain<span class="s2">])</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.a = <span class="s5">Pn</span>(<span class="s5">Pseries</span>(0.05, 0.01, 20))</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.m = 70</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// stop + cleanup in one</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~u</span>.clear</p>
<p class="p18"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9"><b>Ex.3) PLbindef with VarGui</b></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11">// start with gui and define pitch sequence with sliders</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p15"><span class="s2">p = </span>PLbindef<span class="s2">(</span><span class="s6">\z</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, </span>\saw_grain<span class="s2">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.2,</p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\m<span class="s2">, </span><span class="s5">PLseq</span><span class="s2">(</span>\midi<span class="s2">)</span></p>
<p class="p12">);</p>
<p class="p4"><br></p>
<p class="p12"><span class="s5">VarGui</span>([<span class="s6">\midi</span>, [50, 90, <span class="s6">\lin</span>, 1, 60] ! 7], stream: p).gui;</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~z</span>.m = <span class="s5">PLseq</span>(<span class="s6">\midi</span>) + [0, 5, 8]</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~z</span>.m = <span class="s8">~z</span>.m + <span class="s5">PLseq</span>([-1, 0, 1] * 12)</p>
<p class="p4"><br></p>
<p class="p19"><span class="s8">~z</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9"><b>Ex.4) PLbindef with PbindFx</b></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="s5">See</span> also <span class="s5">Ex</span>.7c in <span class="s5">PbindFx</span> help</p>
<p class="p4"><br></p>
<p class="p11">// boot server with extended resources</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p12">s.options.numPrivateAudioBusChannels = 1024;</p>
<p class="p12">s.options.memSize = 8192 * 16;</p>
<p class="p12">s.reboot;</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\echo</span><span class="s2">, { </span>|out, in, maxEchoDelta = 0.2, echoDelta = 0.1,</p>
<p class="p13"><span class="Apple-converted-space">    </span>decayTime = 1, amp = 1, mix = 1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig, inSig = <span class="s5">In</span>.ar(in, 2);</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = <span class="s5">DelayL</span>.ar(</p>
<p class="p12"><span class="Apple-converted-space">        </span><span class="s5">CombL</span>.ar(inSig, maxEchoDelta, echoDelta, decayTime, amp),</p>
<p class="p12"><span class="Apple-converted-space">        </span>maxEchoDelta,</p>
<p class="p12"><span class="Apple-converted-space">        </span>maxEchoDelta - echoDelta</p>
<p class="p12"><span class="Apple-converted-space">    </span>);</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">Out</span>.ar(out, (1 - mix) * inSig + (sig * mix));</p>
<p class="p12">}).add;</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\wah</span><span class="s2">, { </span>|out, in, resLo = 200, resHi = 5000,</p>
<p class="p13"><span class="Apple-converted-space">    </span>cutOffMoveFreq = 0.5, rq = 0.1, amp = 1, mix = 1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig, inSig = <span class="s5">In</span>.ar(in, 2);</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = <span class="s5">RLPF</span>.ar(</p>
<p class="p12"><span class="Apple-converted-space">        </span>inSig,</p>
<p class="p12"><span class="Apple-converted-space">        </span><span class="s5">LinExp</span>.kr(<span class="s5">LFDNoise3</span>.kr(cutOffMoveFreq), -1, 1, resLo, resHi),</p>
<p class="p12"><span class="Apple-converted-space">        </span>rq,</p>
<p class="p12"><span class="Apple-converted-space">        </span>amp</p>
<p class="p12"><span class="Apple-converted-space">    </span>).softclip;</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">Out</span>.ar(out, (1 - mix) * inSig + (sig * mix));</p>
<p class="p12">}).add;</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\noise_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, rq = 0.1, amp = 0.1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">WhiteNoise</span>.ar } ! 2;</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = <span class="s5">BPF</span>.ar(sig, freq, rq) *</p>
<p class="p12"><span class="Apple-converted-space">        </span><span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2) *</p>
<p class="p12"><span class="Apple-converted-space">        </span>(rq ** -1) * (250 / (freq ** 0.8));</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p12">}).add;</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\saw_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, amp = 0.1|</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">VarSaw</span>.ar(freq, <span class="s5">Rand</span>(0, 1)) } ! 2;</p>
<p class="p12"><span class="Apple-converted-space">    </span>sig = sig * <span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2);</p>
<p class="p12"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p12">}).add;</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p11">// prepare EventShortcuts for additional keys</p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p12"><span class="s5">EventShortcuts</span>.addOnBase(<span class="s6">\default</span>, <span class="s6">\fxs</span>, (</p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span>dec: </span>\decayTime<span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span>cd: </span>\cleanupDelay<span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span>cf: </span>\cutOffMoveFreq<span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span>fxo: </span>\fxOrder<span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span>dta: </span>\echoDelta</p>
<p class="p12">), <span class="s9">true</span>);</p>
<p class="p4"><br></p>
<p class="p12"><span class="s5">EventShortcuts</span>.makeCurrent(<span class="s6">\fxs</span>);</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on;</span></p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">(</p>
<p class="p11">// source and fxs passed as PLbindefs</p>
<p class="p4"><br></p>
<p class="p12">k = [<span class="s6">\q</span>, <span class="s6">\echo</span>, <span class="s6">\wah</span>];</p>
<p class="p4"><br></p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\q</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, </span><span class="s5">PLrand</span><span class="s2">([</span>\noise_grain<span class="s2">, </span>\saw_grain<span class="s2">]),</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.25,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, <span class="s5">PLseq</span>([60, 60, 60, 62]),</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\fxo</span>, <span class="s5">PLseq</span>([0, 0, 1, 2]),</p>
<p class="p11"><span class="s2"><span class="Apple-tab-span">	</span></span>// echo introduces delay, so do delay if no echo</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\lag</span>, <span class="s5">Pfunc</span> { <span class="s7">|e|</span> e.fxo.asArray.includes(1).if { 0 }{ 0.2 } },</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.1,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\att</span>, 0.01,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\rel</span>, 0.1,</p>
<p class="p4"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\cd</span>, <span class="s5">Pkey</span>(<span class="s6">\att</span>)+ <span class="s5">Pkey</span>(<span class="s6">\rel</span>) + 0.001</p>
<p class="p12">);</p>
<p class="p4"><br></p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\echo</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\fx<span class="s2">, </span>\echo<span class="s2">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\dta</span>, 0.06,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.5,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\dec</span>, <span class="s5">Pwhite</span>(0.3, 1.8),</p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\cd<span class="s2">, </span><span class="s5">Pkey</span><span class="s2">(</span>\dec<span class="s2">)</span></p>
<p class="p12">);</p>
<p class="p4"><br></p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\wah</span><span class="s2">,</span></p>
<p class="p16"><span class="s2"><span class="Apple-tab-span">	</span></span>\fx<span class="s2">, </span>\wah<span class="s2">,</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\cf</span>, <span class="s5">Pwhite</span>(1, 3),</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.5,</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">\cd</span>, 0.01</p>
<p class="p12">);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11"><span class="s2">p = </span><span class="s5">PbindFx</span><span class="s2">(*k.collect(</span><span class="s5">PLbindef</span><span class="s2">(</span><span class="s5">_</span><span class="s2">))); </span>// PbindFx(*(k.collect { |x| PLbindef(x) }));</p>
<p class="p4"><br></p>
<p class="p12">q = p.play;</p>
<p class="p12">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// manipulate midinotes</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.m = <span class="s8">~q</span>.m + <span class="s5">PLseq</span>([0, 12, -12])</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.m = <span class="s8">~q</span>.m + <span class="s5">PLrand</span>([0, [0, -4]])</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.m = <span class="s8">~q</span>.m + <span class="s5">PLrand</span>([0, [0, -7]])</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// rhythm</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.d = <span class="s5">PLshufn</span>([1, 1, 2, 1] / 8)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// echo param and fx order sequence</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~echo</span>.dta = <span class="s5">Pwhite</span>(0.03, 0.08)</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.fxo = <span class="s5">PLseq</span>([0, 0, 1, 2, 1, [1, 2]])</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~q</span>.m = 48</p>
<p class="p4"><br></p>
<p class="p11">// produce overtone series with echodelta</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~echo</span>.dta = 1 / 24.midicps / <span class="s5">PLseq</span>((1..16))</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// this also works in chords ("fx expansion")</p>
<p class="p11">// source is processed twice per event</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~echo</span>.dta = 1 / [24, 26.7].midicps / <span class="s5">PLseq</span>((1..16))</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p11">// cleanup</p>
<p class="p4"><br></p>
<p class="p12">q.stop</p>
<p class="p4"><br></p>
<p class="p12">k.do { <span class="s7">|i|</span> <span class="s5">PLbindef</span>(i).clear }</p>
<p class="p4"><br></p>
<p class="p18"><br></p>
</body>
</html>
