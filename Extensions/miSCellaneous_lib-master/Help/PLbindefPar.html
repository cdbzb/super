<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1187.4">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #0000ee}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #042eee}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cd1c00}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0433ff}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0326cb}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #008300}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cd1c00; min-height: 12.0px}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #000000}
span.s3 {text-decoration: underline}
span.s4 {text-decoration: underline ; color: #0000ee}
span.s5 {color: #0326cb}
span.s6 {color: #008300}
span.s7 {color: #0433ff}
span.s8 {color: #ff7c00}
span.s9 {color: #434ccb}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>PLbindefPar<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>container for parallel PLbindefs which allows replacement in object prototyping style</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s2"><b>Part of:</b> <a href="miSCellaneous.html"><span class="s3">miSCellaneous</span></a></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: Pdef</b></p>
<p class="p4"><br></p>
<p class="p2"><br></p>
<p class="p1">PLbindefPar employs a number of parallel PLbindefs, replacement of key streams can be done in object prototyping style with a dedicated PLbindefParEnvironment, which also holds player methods. This Environment is itself assigned to the PLbindefPar's name in an Environment of choice, by default the current Environment. Setting can thus be done in very condensed syntax, also in combination with EventShortcuts.</p>
<p class="p2"><br></p>
<p class="p1"><b>NOTE: </b>PLbindefPars are registered globally in the same Dictionary as Pdefs, Pbindefs and PLbindefs. In addition for size = n PLbindefs of the same name with indices i = 0, ... n-1 appended are stored globally. It's recommended to do cleanup with 'clear' after using PLbindef / PLbindefPar as in examples below. Otherwise unwanted or strange behaviour might be caused by leftover sources when playing a new PLbindef / PLbindefPar example with same key. With SC &gt;= 3.7 occasional posts of the default parent event occur with Pbindef, so also with PLbindefPar. I didn't notice any different other behaviour though.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><span class="s2"><b>See also: </b><a href="PLx suite.html"><span class="s4">PLx suite</span></a>, <a href="PLbindef.html"><span class="s4">PLbindef</span></a>, <a href="PLbindefEnvironment.html"><span class="s4">PLbindefEnvironment</span></a>, <a href="PLbindefParEnvironment.html"><span class="s4">PLbindefParEnvironment</span></a>, <a href="EventShortcuts.html"><span class="s3">EventShortcuts</span></a>, <a href="PLx and live coding with Strings.html"><span class="s3">PLx and live coding with Strings</span></a></span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p6"><b>Creation / Class Methods</b></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>*new (...args)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Creates a new PLbindefPar object. First arg should be the key, followed by the number of parallel PLbindefs and the key/value pairs. Values are assigned to single PLbindefs according to the convention of PLbindefParEnvironment::put, see there and examples below. The last arg can be an optional environment which determines where the corresponding PLbindefParEnvironment should be stored, by default this is the current Environment at instantiation time.</p>
<p class="p9"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><b>Instance Methods</b></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>clear</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Stop parallel PLbindefs and remove name entry from <b>refEnvir</b>.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>remove</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Removes not only the PLbindefPar but also associated PLbindefs from global entry.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>sourceEnvir</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Getter for PLbindefPar's PLbindefParEnvironment.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>refEnvir</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Getter for the Environment where PLbindefPar's PLbindefParEnvironment is associated with PLbindefPar's key.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>size</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Getter for PLbindefPar's number of parallel PLbindefs.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p9"><br></p>
<p class="p10"><b>Examples</b></p>
<p class="p11"><br></p>
<p class="p12">// synthdefs to play with</p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p14"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\noise_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, rq = 0.1, amp = 0.1|</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">WhiteNoise</span>.ar } ! 2;</p>
<p class="p13"><span class="Apple-converted-space">    </span>sig = <span class="s5">BPF</span>.ar(sig, freq, rq) *</p>
<p class="p13"><span class="Apple-converted-space">        </span><span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2) *</p>
<p class="p13"><span class="Apple-converted-space">        </span>(rq ** -1) * (250 / (freq ** 0.8));</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p13">}).add;</p>
<p class="p4"><br></p>
<p class="p14"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\sin_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, amp = 0.1|</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">SinOsc</span>.ar(freq, <span class="s5">Rand</span>(0, 2pi)) } ! 2;</p>
<p class="p13"><span class="Apple-converted-space">    </span>sig = sig * <span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2);</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p13">}).add;</p>
<p class="p4"><br></p>
<p class="p14"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\saw_grain</span><span class="s2">, { </span>|out = 0, freq = 400, att = 0.005, rel = 0.1, amp = 0.1|</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig = { <span class="s5">VarSaw</span>.ar(freq, <span class="s5">Rand</span>(0, 1)) } ! 2;</p>
<p class="p13"><span class="Apple-converted-space">    </span>sig = sig * <span class="s5">EnvGen</span>.ar(<span class="s5">Env</span>.perc(att, rel, amp), doneAction: 2);</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s5">OffsetOut</span>.ar(out, sig);</p>
<p class="p13">}).add;</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on;</span></p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p16"><br></p>
<p class="p16"><br></p>
<p class="p10"><b>Ex.1) Setting key streams</b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p12">// use with EventShortcuts</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on</span></p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p15">PLbindefPar<span class="s2">(</span><span class="s6">\v</span><span class="s2">, 3,</span></p>
<p class="p17"><span class="s2"><span class="Apple-converted-space">    </span></span>\i<span class="s2">, [</span>\saw_grain<span class="s2">, </span>\sin_grain<span class="s2">, </span>\noise_grain<span class="s2">],</span></p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s6">\d</span>, 0.8,</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s6">\m</span>, [65, 70, 80],</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s6">\rq</span>, 0.002,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.03,</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s6">\att</span>, <span class="s5">Pwhite</span>(0.05, 0.01)</p>
<p class="p13">)</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.play</p>
<p class="p4"><br></p>
<p class="p12">// set all streams</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.d = 0.2</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// set single streams</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[0].d = 0.1</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[2].d = 0.4</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// parallel intervals and chords for single streams</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[2].m = <span class="s5">Pwhite</span>(80, 90) + [0, 9]</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[0].m = <span class="s5">Pwhite</span>(50, 65) + [0, 5]</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[1].m = <span class="s5">Pwhite</span>(70, 75.5) + [0, 3, 7]</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// differentiate setting with collection</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.m = [50, <span class="s5">Pwhite</span>(90, 80), 96]</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// reference to last sources</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.m = <span class="s8">~v</span>.m + 1</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[2].m = <span class="s8">~v</span>[2].m - <span class="s5">Pwhite</span>(0, 5)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// pause single streams</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[1].isRest = <span class="s9">true</span></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[1].isRest = <span class="s9">false</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// shorter, pause with amplitude setting</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[0].a = 0</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>[0].a = 0.05</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// differentiate setting with collection produced by Function</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.m = { <span class="s7">|i|</span> (i * 15) + <span class="s5">PLseq</span>((0..9)) + [55, 60] } ! 3</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// set only some streams with an index list, passed as first arg to 'value'</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.([0, 1], <span class="s6">\d</span>, 0.3)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.([1, 2], <span class="s6">\d</span>, 0.5)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// set all, they might be time-shifted</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.d = 0.2</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// hard sync with reset</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.reset</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.stop</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~v</span>.clear</p>
<p class="p18"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p10"><b>Ex.2) More parallel streams, from granular to additive</b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12">// use EventShortcuts</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on</span></p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p15">PLbindefPar<span class="s2">(</span><span class="s6">\y</span><span class="s2">, 12,</span></p>
<p class="p12"><span class="s2"><span class="Apple-tab-span">	</span></span>// wrapped indexing: collection is used for all 12 streams</p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, [</span>\saw_grain<span class="s2">, </span>\sin_grain<span class="s2">, </span>\noise_grain<span class="s2">],</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, (1..12)/100,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, { rrand(60, 90) } ! 12,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.02,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\rq</span>, 0.002</p>
<p class="p13">)</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.play</p>
<p class="p4"><br></p>
<p class="p12">// evaluate more than once</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.m = { rrand(60, 90) } ! 12</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// refer to current midinotes</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.m = <span class="s8">~y</span>.m - 1</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.d = [1, 2, 4] / 8</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.d = <span class="s8">~y</span>.d / 4</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.stop</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~y</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// replacement introducing additive structures</p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p15">PLbindefPar<span class="s2">(</span><span class="s6">\add</span><span class="s2">, 12,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, </span>\sin_grain<span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 1,<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, { <span class="s5">Pn</span>(<span class="s5">Pseries</span>(rrand(40, 60), <span class="s5">Pwhite</span>(1.0, 3), 20)) } ! 12,<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\att</span>, 5,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\rel</span>, 5,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.005</p>
<p class="p13">).play</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~add</span>.f = { <span class="s5">PLseq</span>((1..16)) * (100 + <span class="s5">Pwhite</span>(0.0, 3)) } ! 12</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~add</span>.stop</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~add</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p10"><b>Ex.3a) PLbindefPar with VarGui, same control params for parallel streams</b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12">// if different streams should read from one control</p>
<p class="p12">// it's best to refer via a dedicated key</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// start with gui and define pitch sequence with sliders</p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p15">EventShortcuts<span class="s2">.on;</span></p>
<p class="p4"><br></p>
<p class="p15"><span class="s2">p = </span>PLbindefPar<span class="s2">(</span><span class="s6">\w</span><span class="s2">, 3,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, [</span>\saw_grain<span class="s2">, </span>\sin_grain<span class="s2">, </span>\noise_grain<span class="s2">],</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.25,</p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\n<span class="s2">, </span><span class="s5">PLseq</span><span class="s2">(</span>\midi<span class="s2">),</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, [70, 75, 80] + <span class="s5">Pkey</span>(<span class="s6">\n</span>),</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.05,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\rq</span>, 0.005</p>
<p class="p13">);</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">VarGui</span>([<span class="s6">\midi</span>, [0, 12, <span class="s6">\lin</span>, 1, 0] ! 7], stream: p.trace).gui</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.d = [1, 2, 4] / 8</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// see difference</p>
<p class="p4"><br></p>
<p class="p12"><span class="s8">~w</span><span class="s2">.m = [70, 75, 80].collect(</span><span class="s5">Pkey</span><span class="s2">(</span><span class="s6">\n</span><span class="s2">) + </span><span class="s5">_</span><span class="s2">)<span class="Apple-converted-space">  </span></span>// ~w.m = [70, 75, 80].collect { |i| Pkey(\n) + i }</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.m = [70, 75, 80] + <span class="s5">Pkey</span>(<span class="s6">\n</span>)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// three streams of chords, all refering to same sequence</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.m = { <span class="s7">|i|</span> 70 + <span class="s5">Pkey</span>(<span class="s6">\n</span>) + [0, 7, 14] - (i * 12) } ! 3</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// manipulate step source</p>
<p class="p4"><br></p>
<p class="p15"><span class="s8">~w</span><span class="s2">.n = </span>Pstutter<span class="s2">(3, </span>PLseq<span class="s2">(</span><span class="s6">\midi</span><span class="s2">))</span></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.n = <span class="s8">~w</span>.n + <span class="s5">PLseq</span>([0, 0.5, 1])</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.d = [1, 3, 4] / 8</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// cleanup after stopping with gui</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~w</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p10"><b>Ex.3b) PLbindefPar with VarGui, different control params for parallel streams</b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12">// three array controls</p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p15">EventShortcuts<span class="s2">.on;</span></p>
<p class="p4"><br></p>
<p class="p15"><span class="s2">p = </span>PLbindefPar<span class="s2">(</span><span class="s6">\t</span><span class="s2">, 3,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, [</span>\saw_grain<span class="s2">, </span>\sin_grain<span class="s2">, </span>\noise_grain<span class="s2">],</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.25,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\n</span>, { <span class="s7">|i|</span> <span class="s5">PLseq</span>((<span class="s6">\midi</span> ++ i).asSymbol) } ! 3,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, [60, 75, 90].collect { <span class="s7">|i|</span> <span class="s5">Pkey</span>(<span class="s6">\n</span>) + i },</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.05,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\rq</span>, 0.005</p>
<p class="p13">);</p>
<p class="p4"><br></p>
<p class="p15">VarGui<span class="s2">(</span></p>
<p class="p12"><span class="s2"><span class="Apple-tab-span">	</span></span>// three array var controls</p>
<p class="p13"><span class="Apple-tab-span">	</span>({ <span class="s7">|i|</span> [(<span class="s6">\midi</span> ++ i).asSymbol, [0, 12, <span class="s6">\lin</span>, 1, 0] ! 7] } ! 3).flatten,</p>
<p class="p13"><span class="Apple-tab-span">	</span>stream: p</p>
<p class="p13">).gui</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>.d = [1, 3, 2] / 8</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>.m = [[50, 55, 60], [76, 77, 78, 79], [86, 90, 94]].collect(<span class="s5">Pkey</span>(<span class="s6">\n</span>) + <span class="s5">_</span>)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>.d = <span class="s5">PLrand</span>([1, 3, 2]) / 8</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>[2].a = 0</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>[0].a = 0</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// cleanup after stopping with gui</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~t</span>.clear</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p10"><b>Ex.4) PLbindefPar with PbindFx</b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s5">See</span> also <span class="s5">Ex</span>.7c in <span class="s5">PbindFx</span> help</p>
<p class="p4"><br></p>
<p class="p12">// boot server with extended resources</p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p13">s.options.numPrivateAudioBusChannels = 1024;</p>
<p class="p13">s.options.memSize = 8192 * 16;</p>
<p class="p13">s.reboot;</p>
<p class="p4"><br></p>
<p class="p12">// fx synths</p>
<p class="p4"><br></p>
<p class="p14"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\echo</span><span class="s2">, { </span>|out, in, maxEchoDelta = 0.2, echoDelta = 0.1,</p>
<p class="p14"><span class="Apple-converted-space">    </span>decayTime = 1, amp = 1, mix = 1|</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig, inSig = <span class="s5">In</span>.ar(in, 2);</p>
<p class="p13"><span class="Apple-converted-space">    </span>sig = <span class="s5">DelayL</span>.ar(</p>
<p class="p13"><span class="Apple-converted-space">        </span><span class="s5">CombL</span>.ar(inSig, maxEchoDelta, echoDelta, decayTime, amp),</p>
<p class="p13"><span class="Apple-converted-space">        </span>maxEchoDelta,</p>
<p class="p13"><span class="Apple-converted-space">        </span>maxEchoDelta - echoDelta</p>
<p class="p13"><span class="Apple-converted-space">    </span>);</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s5">Out</span>.ar(out, (1 - mix) * inSig + (sig * mix));</p>
<p class="p13">}).add;</p>
<p class="p4"><br></p>
<p class="p14"><span class="s5">SynthDef</span><span class="s2">(</span><span class="s6">\wah</span><span class="s2">, { </span>|out, in, resLo = 200, resHi = 5000,</p>
<p class="p14"><span class="Apple-converted-space">    </span>cutOffMoveFreq = 0.5, rq = 0.1, amp = 1, mix = 1|</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s7">var</span> sig, inSig = <span class="s5">In</span>.ar(in, 2);</p>
<p class="p13"><span class="Apple-converted-space">    </span>sig = <span class="s5">RLPF</span>.ar(</p>
<p class="p13"><span class="Apple-converted-space">        </span>inSig,</p>
<p class="p13"><span class="Apple-converted-space">        </span><span class="s5">LinExp</span>.kr(<span class="s5">LFDNoise3</span>.kr(cutOffMoveFreq), -1, 1, resLo, resHi),</p>
<p class="p13"><span class="Apple-converted-space">        </span>rq,</p>
<p class="p13"><span class="Apple-converted-space">        </span>amp</p>
<p class="p13"><span class="Apple-converted-space">    </span>).softclip;</p>
<p class="p13"><span class="Apple-converted-space">    </span><span class="s5">Out</span>.ar(out, (1 - mix) * inSig + (sig * mix));</p>
<p class="p13">}).add;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// prepare EventShortcuts for additional keys</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">EventShortcuts</span>.addOnBase(<span class="s6">\default</span>, <span class="s6">\fxs</span>, (</p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span>dec: </span>\decayTime<span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span>cd: </span>\cleanupDelay<span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span>cf: </span>\cutOffMoveFreq<span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span>fxo: </span>\fxOrder<span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span>dta: </span>\echoDelta</p>
<p class="p13">), <span class="s9">true</span>);</p>
<p class="p4"><br></p>
<p class="p13"><span class="s5">EventShortcuts</span>.makeCurrent(<span class="s6">\fxs</span>);</p>
<p class="p4"><br></p>
<p class="p15">EventShortcuts<span class="s2">.on;</span></p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13">(</p>
<p class="p12">// source and fxs passed as PLbindefs</p>
<p class="p4"><br></p>
<p class="p13">k = [<span class="s6">\r</span>, <span class="s6">\echo</span>, <span class="s6">\wah</span>];</p>
<p class="p4"><br></p>
<p class="p15">PLbindefPar<span class="s2">(</span><span class="s6">\r</span><span class="s2">, 12,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\i<span class="s2">, [</span>\noise_grain<span class="s2">, </span>\saw_grain<span class="s2">],</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\d</span>, 0.25,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\m</span>, <span class="s5">PLseq</span>([60, 60, 60, 62]),</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\fxo</span>, <span class="s5">PLseq</span>([0, 0, 1, 2]),</p>
<p class="p12"><span class="s2"><span class="Apple-tab-span">	</span></span>// echo introduces delay, so do delay if no echo</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\lag</span>, <span class="s5">Pfunc</span> { <span class="s7">|e|</span> e.fxo.asArray.includes(1).if { 0 }{ 0.2 } },</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 0.03,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\att</span>, 0.01,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\rel</span>, 0.1,</p>
<p class="p4"><br></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\cd</span>, <span class="s5">Pkey</span>(<span class="s6">\att</span>)+ <span class="s5">Pkey</span>(<span class="s6">\rel</span>) + 0.001</p>
<p class="p13">);</p>
<p class="p4"><br></p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\echo</span><span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\fx<span class="s2">, </span>\echo<span class="s2">,</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\dta</span>, 0.06,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 1,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\dec</span>, <span class="s5">Pwhite</span>(0.3, 1.8),</p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\cd<span class="s2">, </span><span class="s5">Pkey</span><span class="s2">(</span>\dec<span class="s2">)</span></p>
<p class="p13">);</p>
<p class="p4"><br></p>
<p class="p15">PLbindef<span class="s2">(</span><span class="s6">\wah</span><span class="s2">,</span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span></span>\fx<span class="s2">, </span>\wah<span class="s2">,</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\cf</span>, <span class="s5">Pwhite</span>(1, 3),</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\a</span>, 1,</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s6">\cd</span>, 0.01</p>
<p class="p13">);</p>
<p class="p4"><br></p>
<p class="p12">// all are Pdefs too, globally stored, so we can collect like this</p>
<p class="p4"><br></p>
<p class="p12"><span class="s2">p = </span><span class="s5">PbindFx</span><span class="s2">(*k.collect(</span><span class="s5">Pdef</span><span class="s2">(</span><span class="s5">_</span><span class="s2">))); </span>// PbindFx(*(k.collect { |x| Pdef(x) }));</p>
<p class="p4"><br></p>
<p class="p13">q = p.play;</p>
<p class="p13">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// differentiate rhythm</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.d = (1..12) / 8</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// manipulate midinotes</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.m = <span class="s8">~r</span>.m + <span class="s5">PLseq</span>([0, 12, -12])</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.m = <span class="s8">~r</span>.m + <span class="s5">PLrand</span>([0, [0, -4]])</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.m = <span class="s8">~r</span>.m + <span class="s5">PLrand</span>([0, [0, -7]])</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// echo param and fx order sequence</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~echo</span>.dta = <span class="s5">Pwhite</span>(0.03, 0.08)</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.fxo = <span class="s5">PLseq</span>([0, 0, 1, 2, 1, [1, 2]])</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~r</span>.m = (48, 50..70)</p>
<p class="p4"><br></p>
<p class="p12">// produce overtone series with echodelta</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~echo</span>.dta = 1 / 24.midicps / <span class="s5">PLseq</span>((1..16))</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// this also works in chords ("fx expansion")</p>
<p class="p12">// source is processed twice per event</p>
<p class="p4"><br></p>
<p class="p13"><span class="s8">~echo</span>.dta = 1 / [24, 26.7].midicps / <span class="s5">PLseq</span>((1..32).mirror)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p12">// cleanup</p>
<p class="p4"><br></p>
<p class="p13">q.stop</p>
<p class="p4"><br></p>
<p class="p13">k.do { <span class="s7">|i|</span> <span class="s5">Pdef</span>(i).clear }</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
</body>
</html>
