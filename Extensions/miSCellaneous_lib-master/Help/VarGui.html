<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="1187.4">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #0000ee}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
p.p11 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p15 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p17 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; color: #0000ee}
p.p18 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p19 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #ff0000}
p.p20 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p21 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 11.0px Helvetica; min-height: 13.0px}
p.p22 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #0026ee}
p.p23 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; color: #ff0000}
p.p24 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p25 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #ff0000; min-height: 12.0px}
p.p26 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p27 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco}
p.p28 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ff0000}
p.p29 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #c40000}
p.p30 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000cff}
p.p31 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p32 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0026ee}
p.p33 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cd1c00}
p.p34 {margin: 0.0px 0.0px 0.0px 28.0px; text-indent: -28.0px; font: 9.0px Monaco; color: #cd1c00}
p.p35 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p36 {margin: 0.0px 0.0px 0.0px 0.0px; font: 7.0px Monaco; min-height: 10.0px}
p.p37 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #e80000}
p.p38 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #000cff}
p.p39 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #e80000}
p.p40 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #e80000; min-height: 12.0px}
p.p41 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #d00000}
p.p42 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #cd1c00; min-height: 12.0px}
p.p43 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #ff2500; min-height: 12.0px}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #000000}
span.s3 {text-decoration: underline}
span.s4 {text-decoration: underline ; color: #006eff}
span.s5 {text-decoration: underline ; color: #0061ff}
span.s6 {text-decoration: underline ; color: #0057ff}
span.s7 {text-decoration: underline ; color: #042eee}
span.s8 {text-decoration: underline ; color: #0069ff}
span.s9 {text-decoration: underline ; color: #003fff}
span.s10 {text-decoration: underline ; color: #0097ff}
span.s11 {color: #042eee}
span.s12 {text-decoration: underline ; color: #005bff}
span.s13 {color: #0026ee}
span.s14 {color: #007300}
span.s15 {font: 12.0px Helvetica}
span.s16 {font: 12.0px Helvetica; color: #000000}
span.s17 {color: #ff0000}
span.s18 {color: #606060}
span.s19 {text-decoration: underline ; color: #002fff}
span.s20 {color: #0009c2}
span.s21 {color: #000cff}
span.s22 {color: #001cda}
span.s23 {color: #0326cb}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>VarGui<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>slider / player gui to set envir variables and synth controllers and play synths, event patterns and tasks<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p3"><span class="s2"><b>Part of:</b> <a href="miSCellaneous.html"><span class="s3">miSCellaneous</span></a></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: Object</b></p>
<p class="p4"><br></p>
<p class="p1">SC setups may contain discrete and continuous control, e.g. using combinations of Pbinds, Tasks and Synths. There are many possible ways of interaction between such elements, sometimes there is the alternative to control things by server or language (e.g. Pbinds versus Demand Ugens) but often one needs to have both. VarGui is a multi purpose slider and player GUI, originally intended for indentifying parameters to be reused in other setups.</p>
<p class="p1">Pbinds and Tasks can easily refer to environmental variables - in case of Pbinds e.g. via Pfunc, Plazy, Pcollect, but more conveniently via the dynamic scope <a href="PLx suite.html"><span class="s4">PLx suite</span></a> - so VarGui can control environmental variables and synth controllers. For basic principles of using event patterns with functional code and the related scoping features see <a href="Event patterns and Functions.html"><span class="s5">Event patterns and Functions</span></a>. VarGui was not intended for performance, however (since miSCellaneous v0.4) it includes a player section. Players can be used in different (reset) modes, states of synths and streams are reflected by colors, it also works with wslib slider classes (Example 8). For quick GUI generation using SynthDef metadata for controlspecs and / or automatic Pbind builds see <a href="VarGui shortcut builds.html"><span class="s6">VarGui shortcut builds</span></a>. As both VarGui help files are quite full of details, a more general overview, including some exercises, is given in <a href="Introduction to miSCellaneous.html"><span class="s7">Introduction to miSCellaneous</span></a>.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><span class="s2"><b>See also:</b> <a href="VarGui shortcut builds.html"><span class="s6">VarGui shortcut builds</span></a>, <a href="Introduction to miSCellaneous.html"><span class="s3">Introduction to miSCellaneous</span></a>, <a href="PLx suite.html"><span class="s8">PLx suite</span></a>, <a href="Event patterns and LFOs.html"><span class="s9">Event patterns and LFOs</span></a>, <a href="Event patterns and Functions.html"><span class="s3">Event patterns and Functions</span></a>, <a href="Buffer Granulation.html"><span class="s3">Buffer Granulation</span></a></span><span class="s7">,</span><span class="s2"> <a href="Live Granulation.html"><span class="s3">Live Granulation</span></a></span><span class="s7">,</span><span class="s2"> <a href="HS with VarGui.html"><span class="s10">HS with VarGui</span></a></span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><b>Some Important Issues Regarding VarGui</b></p>
<p class="p2"><br></p>
<p class="p1">VarGui allows to choose SynthDefs or Synths, Events patterns or EventStreamPlayers and Task functions or Tasks as input. It is recommended to take the more general objects (SynthDefs, Event patterns, Task functions) as then derived Synths, EventStreamPlayers and Tasks are newly generated and the latter are run in newly generated Environments. If you follow this it is very unlikely to accidentally break gui representation of data (though it's not strict MVC paradigm).</p>
<p class="p2"><br></p>
<p class="p1">On the other hand there are special cases when you might want to pass Synth objects / synth nodes, Tasks or EventStreamPlayers directly (e.g. <a href="HS with VarGui.html"><span class="s10">HS with VarGui</span></a>). Then a bit more care has to be taken as, although a VarGui instance doesn't allow to poll more than one GUI window from it, nothing prevents you from refering to identical Synth objects / synth nodes, Tasks, EventsStreamPlayers or environmental variables with different VarGui instances. This is not recommended as, obviously, a possible source of confusion.</p>
<p class="p2"><br></p>
<p class="p1">If you are passing a Synth directly and moreover its SynthDef is not known to SynthDescLib setting a single component of an arrayed control also causes setting of all components below (no other choice at the moment, however, a very special case).<span class="Apple-converted-space"> </span></p>
<p class="p6"><br></p>
<p class="p1"><b>GUI specific:</b></p>
<p class="p2"><br></p>
<p class="p1">With miSCellaneous v0.16 (March 2017) backwards compatibility with Cocoa and SwingOSC is no longer supported, now cross-platform Qt is standard. VarGui was originally written with Cocoa as reference, though restrcitions on Qt are minor.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p7">1) <span class="Apple-tab-span">	</span>With Qt mouseDown is the hardcoded mode of player action, which anyway could be regarded as standard usage.</p>
<p class="p8"><br></p>
<p class="p7">2) <span class="Apple-tab-span">	</span>Moving several sliders in parallel (see Example 1c) works on all platforms and with wslib sliders.<span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p7">3) <span class="Apple-tab-span">	</span>Combined slider movement with modifier keys differs in the necessary order of key pressing and mouse clicking.</p>
<p class="p7"><span class="Apple-tab-span">	</span>In Qt you can (and with the Cmd modifier involved you have to) press thereafter.</p>
<p class="p8"><br></p>
<p class="p7">4)<span class="Apple-tab-span">	</span>With EZSlider you can jump to a certain slider position by clicking at an arbitrary position in the slider field.</p>
<p class="p7"><span class="Apple-tab-span">	</span>With wslib sliders you can choose modes \jump and \move (Example 8).<span class="Apple-converted-space"> </span></p>
<p class="p8"><br></p>
<p class="p7">5)<span class="Apple-tab-span">	</span>Combined synth / stream player button actions with Caps-lock are currently not working with Qt.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p8"><br></p>
<p class="p7">You can list styles by</p>
<p class="p8"><br></p>
<p class="p9"><span class="s11">GUI</span>.availableStyles</p>
<p class="p4"><br></p>
<p class="p7">and set with</p>
<p class="p4"><br></p>
<p class="p10"><span class="s11">GUI</span><span class="s2">.style = </span>\myFavoriteStyle</p>
<p class="p11"><br></p>
<p class="p12"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p13"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>*new (varCtr, synthCtr, stream, synth, clock, quant, varEnvirGroups, envir, synthCtrGroups, assumePlaying, assumeRunning, assumeEnded, server)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Create a new VarGui object, which holds control specifications.</p>
<p class="p15"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>varCtr </b>- <b>specPairs</b> or a collection of <b>specPairs</b>, where</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>specPairs</b> is a collection of the form <b>[ key, spec, ...<span class="Apple-converted-space">  </span>] </b>where</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key</b> is the symbol of the environmental variable to be set and</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>spec </b>must be one of those:</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(a) <span class="Apple-tab-span">	</span>Collection of the form <b>[ minval, maxval, warp, step, default ]</b>,<b><span class="Apple-converted-space"> </span></b></p>
<p class="p16"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>defining the corresponding ControlSpec, or a collection of specs of this form</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for an arrayed control if the environmental variable should have the value<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>of a collection itself. <b>step </b>is used for the derivation of slider step size.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(b) <span class="Apple-tab-span">	</span>Symbol refering to a ControlSpec globally stored in Spec.specs</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or a collection thereof for arrayed control.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ControlSpec.step<b> </b>is used for the derivation of slider step size.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(c) <span class="Apple-tab-span">	</span>SimpleNumber for a dummy slider with fixed value.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>specPairs</b> or single components of a collection of <b>specPairs</b> are nil and the corresponding</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>stream</b> arg is a Symbol or String pointing to a SynthDef, it will be tried to derive<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>controls from corresponding SynthDef metadata resp. global ControlSpecs<span class="Apple-converted-space"> </span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(see <a href="VarGui shortcut builds.html"><span class="s3">VarGui shortcut builds</span></a>).</span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Variables are set in environments that are either given implicitely (1) or explicitely (2):</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(1) by eventstream players / tasks passed to <b>stream</b> - they are already bound to an</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>environment - or newly generated together with eventstream players or tasks from<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>patterns or functions passed to <b>stream</b>.<span class="Apple-converted-space"> </span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(2) by <b>envir</b>. This allows setting of variables in Environments in case of absent stream players.</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>From explicit or implicit envir input an ordered collection of non-identical environments is derived,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>which, without one of the above infos, will consist of currentEnvironment only.</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>varCtr</b> is already grouped as a collection of <b>specPairs </b>then variables from i-th <b>specPairs</b> will be set</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in the i-th environment of the derived collection.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>varCtr</b> is given as a flat collection and <b>specPairs </b>contains no multiple keys then variables are set</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in the first resp. only environment in question.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>varCtr</b> is given as a flat collection and <b>specPairs </b>contains multiple keys then <b>varEnvirGroups</b></p>
<p class="p16"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>is needed to map variables to environments (Example 5a).</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Note that the i-th environment means the i-th non-identical environment, not necessarily</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(in the case of environments implicitely given by eventstream players / tasks) the environment</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>of the i-th stream.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synthCtr </b>- <b>specPairs</b> or a collection of <b>specPairs</b>, where</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>specPairs</b> may be nil or a collection of the form <b>[ key, spec, ...<span class="Apple-converted-space">  </span>] </b>where</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key</b> is the symbol of the control arg to be set and</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>spec </b>must be one of those:</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(a) <span class="Apple-tab-span">	</span>Collection of the form <b>[ minval, maxval, warp, step, default ]</b>,<b><span class="Apple-converted-space"> </span></b></p>
<p class="p16"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>defining the corresponding ControlSpec, or a collection of specs of this form</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for an arrayed control. <b>step </b>is used for the derivation of slider step size.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(b) <span class="Apple-tab-span">	</span>Symbol refering to a ControlSpec globally stored in Spec.specs</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or a collection thereof for arrayed control.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ControlSpec.step<b> </b>is used for the derivation of slider step size.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(c) <span class="Apple-tab-span">	</span>SimpleNumber for a dummy slider with fixed value.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>specPairs</b> or single components of a collection of <b>specPairs</b> are nil, it will be tried to</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>derive controls from SynthDef metadata resp. global ControlSpecs (see <a href="VarGui shortcut builds.html"><span class="s12">VarGui shortcut builds</span></a>).</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>synthCtr</b> is already grouped as a collection of <b>specPairs </b>then controls from i-th specPairs will be used</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for setting the i-th synth.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>synthCtr</b> is given as a flat collection and <b>specPairs </b>contains no multiple keys then controls will be used</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for setting the only synth in question.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>synthCtr</b> is given as a flat collection and <b>specPairs </b>contains multiple keys then <b>synthCtrGroups</b></p>
<p class="p16"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>is needed to map synth controls to synths (Example 5b).</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>stream </b>- Expects Pattern, EventStreamPlayer, Function, Task or a collection thereof,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>determining the number of stream players.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Patterns / Functions are used as templates for EventStreamPlayers / Tasks in<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>environments generated at init time. If <b>stream </b>is unequal nil variables given by<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>varCtr</b> will be set in the environments derived from it.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>A Symbol or String pointing to a SynthDef causes automatic generation of a Pbind.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>If <b>varCtr</b> resp.<b> </b>the corresponding <b>varCtr</b> component is nil it will be tried to derive<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Pbind controls from corresponding SynthDef metadata resp. global ControlSpecs<span class="Apple-converted-space"> </span></p>
<p class="p17"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(see <a href="VarGui shortcut builds.html"><span class="s3">VarGui shortcut builds</span></a>).</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Size of <b>stream </b>must at least equal and may exceed the number of <b>varCtr</b> groups,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>which (see above) may be given by <b>varCtr</b> itself (if a grouped collection of <b>specPairs</b>)</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or <b>varCtrGroups</b>.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Correspondence between environments of variables and eventstream / task players<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>is optionally indicated in the GUI - however the user is responsible for defining<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>patterns and task functions that really involve the variables to be set !</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synth </b>- Input to which synth controls are mapped. Expects Symbol refering to a SynthDef,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Synth, nodeID or collection thereof.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Size of <b>synth</b> must at least equal and may exceed the number of synthCtr groups,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>which (see above) may be given by <b>synthCtr</b> itself (if a grouped collection of <b>specPairs</b>)</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or <b>synthCtrGroups</b>.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>It is recommended to refer to "known" SynthDefs (SynthDescLib), best by<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>passing Symbols or also registered Synths, otherwise the correct synth state must be given</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>explicitely by <b>assumePlaying, assumeRunning </b>resp.<b> assumeEnded, </b>which is a nearby</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>source of error and confusion.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clock </b>-<span class="Apple-converted-space">  </span>TempoClock, nil or collection thereof for playing streams.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Passed clocks have precedence over implicitely given clocks (running eventstream players<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or tasks as <b>stream</b> input) in case of resuming from pause state.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to the default TempoClock.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>quant </b>-<span class="Apple-converted-space">  </span>Quant, Float, nil or collection thereof used as quant data for playing streams.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Will be used in case of resuming from pause state for running<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>eventstream players or tasks given as <b>stream</b> input.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to Quant.default (none).</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>varEnvirGroups </b>- SequenceableCollection of Collections of Integer.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Expects ordered partition of the number N of <b>specPairs</b> given to <b>varCtr</b> as a flat collection,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>also counting multiple occurences, thus defining a mapping: variable keys -&gt; environments.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Must be a valid partition of N (taking all integers i &lt; N, 0 included, each only once).<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Its size must not exceed the number of implicitely or explicitely given environments (see <b>varCtr</b>).</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>E.g. for 3 environments and 6 variables [[2], [0,1,5], [4,3]] would be valid.<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>envir </b>- SequenceableCollection of Environments.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Environments to be used for variable setting in case of absent stream players, only admissible if <b>stream</b> is nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synthCtrGroups -</b> SequenceableCollection of Collections of Integer.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Expects ordered partition of the number N of <b>specPairs</b> given to <b>synthCtr</b> as a flat collection,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>also counting multiple occurences, thus defining a mapping: synth control keys -&gt; environments.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Must be a valid partition of N (taking all integers i &lt; N, 0 included, each only once).<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Its size must not exceed the size of <b>synth</b>.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>assumePlaying </b>- Boolean, nil or collection thereof, then size must equal the number of synths given</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>by <b>synth</b> or <b>synthCtr</b>. Player state information for (unregistered) synths or nodeIDs,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>booleans are not accepted if corresponding items in <b>synth</b> are instances of Symbol or String.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>assumeRunning </b>- Boolean, nil or collection thereof, then size must equal the number of synths given</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>by <b>synth</b> or <b>synthCtr</b>. Player state information for (unregistered) synths or nodeIDs,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>booleans are not accepted if corresponding items in <b>synth</b> are instances of Symbol or String.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>assumeEnded </b>- Boolean, nil or collection thereof, then size must equal the number of synths given</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>by <b>synth</b> or <b>synthCtr</b>. Player state information for (unregistered) synths or nodeIDs,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>booleans are not accepted if corresponding items in <b>synth</b> are instances of Symbol or String.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to nil.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>server </b>- Server. The server to send node messages for synth control. Doesn't affect Pbinds</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>as server can be determined by their definition. Defaults to the default server.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s = <span class="s13">Server</span>.local;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s13">Server</span>.default = s;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Pbind defined with variable to be controlled while playing</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Pfunc's function is evaluated at playtime of each Event and gets</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// the value of the variable ~midi in the environment in which the EventStreamPlayer will be playing</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>p = <span class="s13">Pbind</span>(<span class="s14">\midinote</span>, <span class="s13">Pfunc</span> { ~midi } + <span class="s13">Pseq</span>([0, 3, 5, 7], <span class="s13">inf</span>), <span class="s14">\dur</span>, 0.2)<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// VarGui to set this variable.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// As a pattern is given as stream arg the derived EventStreamPlayer will run in a new environment</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// which is generated at VarGui init time</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v = <span class="s13">VarGui</span>([<span class="s14">\midi</span>, [50, 70, <span class="s14">\lin</span>, 1, 55]], stream: p).gui;</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Try out basic slider and player functionality</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Playing:<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_1.png" alt="attachments/VarGui/player_1.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Background of player button lightening yellow. Functionality of the reset button depends</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// on the active mode. The green background of the reset mode button indicates that the reset button</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// will reset while playing and its background will flash yellow.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The text field on the right side indicates whether an eventstream player or a task is playing,</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// that on the left side shows the index of the environment in which the stream is playing.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// This is mainly useful if more stream players and variables of same names in different environments</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// are involved - below the players there is a toggle button to indicate the envir index in slider name fields.<span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Pausing:<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_2.png" alt="attachments/VarGui/player_2.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now pushing the play button will resume the stream where it has been paused,</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// pushing the reset button (if the reset mode button has green background)<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// will reset and play the stream.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Pausing and reset:<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_3.png" alt="attachments/VarGui/player_3.png"></span></p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// This state can be reached from playing, pausing or ended stream when pushing the reset button under<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// reset mode pause (orange background). Now only the play button can play the (reset) stream</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Stream has ended:<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_4.png" alt="attachments/VarGui/player_4.png"></span></p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// E.g. if an eventstream player has encountered nil, reset button's background will become red.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now it needs the reset button to go on and its action - pause or play - depends on the active mode.<span class="Apple-converted-space"> </span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>////////////////////////////////////////////////////<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// synth definition with raising frequency</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p22"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>SynthDef<span class="s2">(</span><span class="s14">\synth_0</span><span class="s2">, { </span>|devFactor = 0.1, devFreq = 10, amp = 0.1|</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s13">var</span> freq = <span class="s13">XLine</span>.kr(400, 1200, 10);<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s13">Out</span>.ar(0, <span class="s13">SinOsc</span>.ar(<span class="s13">SinOsc</span>.ar(devFreq, 0, devFactor * freq, freq), mul: amp).dup(2) * <span class="s13">EnvGate</span>.new)<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// VarGui to play synth of above definition and set synth args,<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Player functionality with different stop / renew modes.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Notification must be on.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Note that pause, stop and resume actions cause sending of run / free messages, thus possibly audible clicks.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// To avoid that work with amp = 0 or use a gated envelope and a gate control slider with only values 0 and 1 or</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// use Synths of limited duration as in Example (2)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p22"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>VarGui<span class="s2">(</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synthCtr: [<span class="s14">\devFactor</span>, [0, 0.99, <span class="s14">\lin</span>, 0.01, 0.5],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [1, 100, <span class="s14">\lin</span>, 0.1, 70],</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.3, <span class="s14">\lin</span>, 0.001, 0.1]],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth: <span class="s14">\synth_0</span>).gui;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Latency options (buttons and boxes below the player section):</p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// bundle latency of synth player actions can be set to nil, a custom value (button abbrieviation c) or<span class="Apple-converted-space"> </span></p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// global server latency (abbr. s), these two values can be set in the boxes below<span class="Apple-converted-space"> </span></p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// settings can be used to sync synth and stream players, if both contained in a GUI</p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Synth players work similar as stream players, but there are more options.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// There is an addtional stop mode button that determines how and if<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// renewing (creating new synth nodes of same definition) is handled.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// If, as above, a synth is given by a reference to a known SynthDef</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// VarGui will start with a basicNew Synth object, indicated by<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// white background of the synth's number field:</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_5.png" alt="attachments/VarGui/player_5.png"></span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Rate type (audio) is indicated in the field on the right.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// From this state a node on the server will be created by pause (newPaused) or play (new):</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_6.png" alt="attachments/VarGui/player_6.png"></span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now playing and pausing work as usual.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The red and blue background of the stop mode button indicates that the red stop button</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// will become a blue renew button as soon as the Synth is stopped (node freed).</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// In addition to the renew modes play (green) and pause (orange) there is also a</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// renew mode basic new (white):</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_7.png" alt="attachments/VarGui/player_7.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// If stop mode is set to renew (blue) the renew button will never change its function.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Under renew mode play (green) every renew will free a Synth and immediately start a new<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// (background flashing yellow):</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_8.png" alt="attachments/VarGui/player_8.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// If stop mode is set to stop (red background), the stop / renew button will change to red:</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_9.png" alt="attachments/VarGui/player_9.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The renew mode button loses its function (greyed out) and stopping just frees the Synth:</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/player_10.png" alt="attachments/VarGui/player_10.png"></span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Now stop mode would have to be changed in order to play a new Synth.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// General functionality</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s15"><img src="attachments/VarGui/main_buttons.png" alt="attachments/VarGui/main_buttons.png"></span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The Update Button</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Unless the VarGui window was generated with option updateNow set to false</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// (which could be desired e.g. for a start with Synth defaults),<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// variables and synth controls are set to slider values at gui init time,</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// normally updating is not required.<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// As for most uses VarGui would generate new separate environments for</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// passed event patterns and task functions, there is no update mechanism implemented</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// if these variables would be changed otherwise.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Analagously controls of Synths played (and probably just yet generated) by a VarGui<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// player could of course be set by means other than a VarGui slider action.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Anyway both situations seem to be exceptional (you could hardly do so just by an oversight),<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// though you can update to all slider values manually.</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The Save Button</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Opens a dialog to save the current slider state as an array of 4 items:<span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// varCtr as flattened array of specPairs, synthCtr as flattened array of specPairs,<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// varEnvirGroups, synthCtrGroups (which are only stored as groupings in case of multiple key occurences, nil optherwise)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Player data and synth information is not stored.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// For loading from a file you would have to pass this (see the load method below)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// The Stop Button</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Free all synths and stop all streams.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// You can also use modifier keys for stopping groups of players,</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// e.g. Shift-click on a stream players's pause button to stop all streams.</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Freeing all synths in the same way only works if all synth players can be stopped by their stop buttons at this time.<span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p25"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>*load (pathname, filename, stream, synth, clock, quant, varEnvirGroups, envir, synthCtrGroups, assumePlaying, assumeRunning, assumeEnded, server)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Create a VarGui, that loads a stored slider state (<b>varCtr </b>and <b>synthCtr </b>data) from the specified file,</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>which has probably been saved before via dialog. See also<span class="Apple-converted-space">  </span><a href="VarGui shortcut builds.html"><span class="s6">VarGui shortcut builds</span></a>, Ch. 6.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>pathname </b>- Pathname string.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>filename </b>- Filename string.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>other args</b> - see <b>*new</b></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>*load_old (pathname, filename, stream, synth, clock, quant, varEnvirGroups, envir, synthCtrGroups, assumePlaying, assumeRunning, assumeEnded, server)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Create a VarGui, that loads a stored slider state from the specified file.</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>This is for loading slider states that have been saved with miSCellaneous v0.3 or earlier, thus ignoring the synth control slider label.</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Though old code examples will not necessarily work after just replacing load by load_old as other conventions have changed too.</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Maybe you'd also have to change <b>synth</b> and <b>stream</b> (former <b>players</b>) or add <b>assumePlaying </b>and <b>assumeRunning </b>args.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>pathname </b>- Pathname string.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>filename </b>- Filename string.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>other args</b> - see <b>*new</b></p>
<p class="p15"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p26"><b>Creating a gui from the VarGui object</b></p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>gui (sliderHeight, sliderWidth, labelWidth, numberWidth, sliderType, sliderMode, playerHeight,<span class="Apple-converted-space"> </span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>precisionSpan, stepEqualZeroDiv, tryColumnNum, allowSynthsBreak, allowVarsBreak,<span class="Apple-converted-space"> </span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>allowSynthBreak, allowArrayBreak, allowEnvirBreak, minPartitionSize,<span class="Apple-converted-space"> </span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sliderPriority, playerPriority, streamPlayerGroups, synthPlayerGroups, comboPlayerGroups,<span class="Apple-converted-space"> </span></b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>font, colorsLo, colorsHi, colorDeviation, ctrButtonGreyCenter, ctrButtonGreyDev, greyMode, name, updateNow,</b></p>
<p class="p1"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sliderFontHeight, playerFontHeight, maxWindowWidth, maxWindowHeight)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Create a gui window.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderHeight </b>- Gui slider height. Defaults to 18.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderWidth </b>- Gui slider width. Depends on number of columns if not given explicitely.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>labelWidth </b>- Slider label width. Default depends on platform and gui scheme (70 or 75). <span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>numberWidth </b>- Slider numberbox width. Default depends on platform and gui scheme (40 or 45). <span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderType </b>- One of the Symbols \standard, \smooth, \round. Both latter refer to EZSmoothSlider</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and<span class="Apple-converted-space">  </span>EZRoundSlider from wslib (Quark), which needs to be installed for that choice.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 8. Defaults to \standard.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderMode </b>- One of the Symbols \jump, \move.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Only relevant in case of sliderType \smooth or \round.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Determines behaviour if slider field is clicked apart from the knob. <span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 8. Defaults to \jump.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>playerHeight </b>- Gui player height. Defaults to 18.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>precisionSpan </b>- Integer. Precision span to be regarded for representation of controlspec step.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 9. Defaults to 10.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>stepEqualZeroDiv </b>- Integer. Division to be assumed if controlspec step equals 0.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 9. Defaults to 100.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>tryColumnNum </b>- Integer. VarGui tries to arrange variable and control sliders in this number of columns</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if possible under the restrictions of <b>maxWindowWidth</b>, <b>sliderWidth</b>, <b>minPartitionSize</b> and the following allow options.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Internally a list of possible break indices is derived and then a partition as equal in size as possible is searched for.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Examples 5a, 5b.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to 1.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allowSynthsBreak </b>- Boolean. Determines if all synth control sliders should be grouped within one column.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to true.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allowVarsBreak </b>- Boolean. Determines if all variable control sliders should be grouped within one column.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to true.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allowSynthBreak </b>- Boolean. Determines if control sliders of one synth should be grouped within one column.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Setting false only has an effect if synth controls are ordered in connected groups.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to true.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allowArrayBreak </b>- Boolean. Determines if control sliders of an arrayed control (variable or synth) should be<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>grouped within one column. Defaults to true.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>allowEnvirBreak </b>- Boolean. Determines if control sliders of one environment should be grouped within one column.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Setting false only has an effect if environmental variables are ordered in connected groups.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to true.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>minPartitionSize</b> - Integer. Determines the minimum number of sliders of same type that may be grouped<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in a different column. Defaults to 0.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderPriority</b> - Symbol \var or \synth. Determines if variable or synth control sliders should be listed first.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to \var.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>playerPriority</b> - Symbol \stream or \synth. Determines if stream or synth players should be listed first.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to \stream.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>streamPlayerGroups</b> - Grouping of number of stream players (E.g. [[0], [1,2]] is a valid grouping of 3 players).<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defines control group for modifier option of stream playing.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to the grouping of all streamPlayers.<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synthPlayerGroups</b> - Grouping of number of synth players.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defines control group for modifier option of synth playing.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to the grouping of all synthPlayers.<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>comboPlayerGroups</b> - ***currently not working***<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Grouping of number of synth and stream players.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defines control group for modifier option of combined synth and stream playing.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Defaults to the grouping of all synth- and streamPlayers.<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>font </b>- GUI font as String. Defaults to "Helvetica".</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>colorsLo </b>- Low RGB value for color space, in which distinct slider colors for logical groups (synth, environment)<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and background are chosen by random. Must be between 0 and 1. Defaults to 0.25 in color mode<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and 0.4 in grey mode.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>colorsHi </b>- Hi RGB value for color space, in which distinct slider colors for logical groups (synth, environment)<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and background are chosen by random. Must be between 0 and 1. Defaults to 0.7 in color mode<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>and 0.6 in grey mode.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>colorDeviation </b>- Nonnegative SimpleNumber. Determines the maximum amount of color deviation within a<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>logical slider group (synth, environment). Within the maximum deviation distinct colors are ramdomly chosen,<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>but arrayed controls get the same color. Defaults to 0.12 in color mode and 0 in grey mode.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>ctrButtonGreyCenter </b>- Float between 0 and 1. Determines the grey center from which button colors deviate<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>by the amount of <b>ctrButtonGreyDev. </b>Defaults to 0.5.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>ctrButtonGreyDev </b>- Float between 0 and 1. Determines the intensity of button colors deviating from</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>ctrButtonGreyCenter. </b>Defaults to 0.8 in color mode and 0.65 in grey mode.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>greyMode </b>- Boolean. Determines if color or grey mode is chosen. Defaults to false.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>varColorGroups</b> - Grouping of colors of variable control sliders. Overrules automatic color grouping.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>All indices &lt; n (number of sliders) must occur exactly once. E.g. [[0], [1,2]] would be valid for n = 3.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 7.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synthColorGroups</b> - Grouping of colors of synth control sliders. Overrules automatic color grouping.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>All indices &lt; n (number of sliders) must occur exactly once. E.g. [[0], [1,2]] would be valid for n = 3.<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>See Example 7.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>name </b>- Symbol or String. Name to be displayed in the GUI window title bar. If not given explicitely types of</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>controls and players are indicated.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>updateNow<span class="Apple-converted-space"> </span></b> - Boolean. Determines if controls and variables should be set to slider values at GUI build time.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>To keep sliders in sync with control this is done by default - however there may be cases when it is</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>desirable to start with other values, e.g. the synth's defaults. If set to false slider values will not be set</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>before the slider is moved or before all values are set by the update method or the corresponding button.<span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderFontHeight </b>- Float. Adapts to sliderHeight if value nil is given (default).<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Normally this doesn't have to be set except with very small <b>sliderHeight</b> and/or certain fonts.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>playerFontHeight </b>- Float. Defaults to 12.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>maxWindowWidth </b>- Float. Defaults to 1500.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>maxWindowHeight </b>- Float. Defaults to 700.</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p23"><span class="s16"><span class="Apple-tab-span">	</span></span><span class="s2"><span class="Apple-tab-span">	</span></span>// SynthDef from above, number of synth players multiplied by expanding single control</p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// For multiple slider and player button control see the modifier options explained in Example 1c.</p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v = <span class="s13">VarGui</span>(</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synthCtr: [<span class="s14">\devFactor</span>, [0, 0.99, <span class="s14">\lin</span>, 0.01, 0.5],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [1, 100, <span class="s14">\lin</span>, 0.1, 70],</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.2, <span class="s14">\lin</span>, 0.001, 0.02]] ! 6,<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth: <span class="s14">\synth_0</span> ! 6);</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.gui;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p24"><br></p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// GUI appearance customization:</p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// close window (only one window per VarGui instance allowed) and try again with same or other color options<span class="Apple-converted-space"> </span></p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.gui;</p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s17">//</span></p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.gui(colorDeviation: 0, colorsLo: 0.4, colorsHi: 0.9);</p>
<p class="p24"><br></p>
<p class="p24"><br></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s17">//</span></p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.gui(greyMode: <span class="s13">true</span>);</p>
<p class="p24"><br></p>
<p class="p24"><br></p>
<p class="p23"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// force slider arrangement in 2 columns, controls of each synth should only be in one column</p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p27"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.gui(colorDeviation: 0, tryColumnNum: 2, allowSynthBreak: <span class="s13">false</span>);</p>
<p class="p24"><br></p>
<p class="p24"><br></p>
<p class="p24"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// you can save a slider state snapshot by button / dialog to the file "XY",</p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// only slider states (flattened spacPair collections) and groupings are stored,<span class="Apple-converted-space"> </span></p>
<p class="p19"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// you have to pass synth data with load<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s13">VarGui</span>.load(<span class="s18">"PathToXY"</span>, <span class="s18">"XY"</span>, synth: <span class="s14">\synth_0</span> ! 6).gui;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p24"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>update</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Update variables and controllers to current slider values. Like update button action.</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Unless the VarGui window was generated with option <b>updateNow </b>set to false,<span class="Apple-converted-space"> </span></p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>variables and controllers are immediately set to slider values and normally updating is not required.<span class="Apple-converted-space"> </span></p>
<p class="p15"><span class="Apple-tab-span">	</span></p>
<p class="p15"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>updateVarSliders(key, varNum, val, indexOffset, updateNow)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Update variable sliders.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key </b>- Variable name given as Symbol. <span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>varNum </b>- Integer. Index of variable occurence in given <b>varCtr</b>. Defaults to 0.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>val </b>- Float. May also be collection, then a sequence of variable sliders is set.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>indexOffset </b>- Integer. Updating will start at this index in case <b>key</b> refers to arrayed control. Defaults to 0.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>updateNow </b>- Boolean. Determines if variables should immediately be updated with sliders. Defaults to true.</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>updateSynthSliders(key, synthNum, val, indexOffset, updateNow)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Update synth sliders.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key </b>- Synth control name given as Symbol. <span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>synthNum </b>- Integer. Index of synth in given <b>synthCtr</b>. Defaults to 0.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>val </b>- Float. Maybe also be collection, then a sequence of synth sliders is set.<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>indexOffset </b>- Integer. Updating will start at this index in case <b>key</b> refers to arrayed control. Defaults to 0.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>updateNow </b>- Boolean. Determines if synth controls should immediately be updated with sliders. Defaults to true.</p>
<p class="p15"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>font(font, sliderFontHeight, playerFontHeight)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Set GUI font.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>font </b>- String. Defaults to "Helvetica".</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sliderFontHeight </b>- Integer. Defaults to 12.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>playerFontHeight </b>- Integer. Defaults to 12.</p>
<p class="p15"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>addSliderAction(function, type, index, envir)</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Add an action to be evaluated as sliderView's mouseUpAction.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>function </b>- Function.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>type </b>- Slider type, expects \var or \synth. Defaults to \var.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>index </b>- Integer. Slider index of given type.</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>envir </b>- Environment where function should be evaluated. If not specified and <b>type</b> equals \var<span class="Apple-converted-space"> </span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>the environment associated with the variable will be taken.</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>startMIDIlearn</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Start learining mode for receiving MIDI cc messages for slider control, see Ex.10.</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p14"><b><span class="Apple-tab-span">	</span>stopMIDIlearn</b></p>
<p class="p15"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p14"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span>Stop learining mode for receiving MIDI cc messages for slider control, see Ex.10.</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p26"><b>Example 1a: <span class="Apple-converted-space">  </span>step sequencer</b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">s = <span class="s13">Server</span>.local;</p>
<p class="p9"><span class="s13">Server</span>.default = s;</p>
<p class="p9">s.boot;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// There are different ways to read a sequence of values from a<span class="Apple-converted-space"> </span></p>
<p class="p28">// settable array assigned to an envir variable.</p>
<p class="p28">// PLseq is convenient, for a comparison with Plazy, Pfunc etc. see <a href="PLx suite.html"><span class="s19">PLx suite</span></a></p>
<p class="p4"><br></p>
<p class="p28">// In all cases the EventStreamPlayer can be played in an<span class="Apple-converted-space"> </span></p>
<p class="p28">// arbitrary environment, from which ~seq will be taken.</p>
<p class="p28">// This holds true for Patterns with functional code like Pfunc</p>
<p class="p28">// and also for PLseq, the latter has an envir arg<span class="Apple-converted-space"> </span></p>
<p class="p28">// which defaults to \current.</p>
<p class="p4"><br></p>
<p class="p28">// Note that all PLx Patterns default to repeats = inf,</p>
<p class="p28">// ListPatterns as Pseq default to repeats = 1.</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p29">// OffsetOut for exact timing</p>
<p class="p4"><br></p>
<p class="p30"><span class="s20">SynthDef</span><span class="s2">(</span><span class="s14">\synth_1a</span><span class="s2">, { </span>|freq = 400, preAmp = 5, amp = 0.1|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s21">var</span> src = <span class="s20">SinOsc</span>.ar(freq, 0, mul: preAmp).tanh ! 2;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s20">OffsetOut</span>.ar(0, src * amp * <span class="s20">EnvGen</span>.ar(<span class="s20">Env</span>.perc, doneAction: 2))</p>
<p class="p9">}).add;</p>
<p class="p4"><br></p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\synth_1a<span class="s2">,</span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\preAmp</span><span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span><span class="s14">\preAmp</span><span class="s2">),<span class="Apple-converted-space">  </span></span>// or Pfunc { ~preAmp }<span class="Apple-tab-span">	</span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\amp</span><span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span><span class="s14">\amp</span><span class="s2">), </span>// or Pfunc { ~amp }<span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midinote<span class="s2">, </span><span class="s13">PLseq</span><span class="s2">(</span>\seq<span class="s2">) + </span><span class="s13">PL</span><span class="s2">(</span>\seqAdd<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p4"><br></p>
<p class="p28">// ~seq will be set and read in the new Environment, which will be generated at VarGui init time.</p>
<p class="p4"><br></p>
<p class="p9">~specPairs = [<span class="s14">\seq</span>, [36, 60, <span class="s14">\lin</span>, 1, 36] ! 5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\seqAdd</span>, [0, 12, <span class="s14">\lin</span>, 1, 0],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.3, <span class="s14">\lin</span>, 0.01, 0.1],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20]];</p>
<p class="p4"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>(~specPairs, stream: p).gui;<span class="Apple-tab-span">	</span></p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 1b: <span class="Apple-converted-space">  </span>step sequencer with MIDI</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p28">// connect a MIDI device, allNotesOff with CmdPeriod useful</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p32">MIDIClient<span class="s2">.init;</span></p>
<p class="p9">m = <span class="s13">MIDIOut</span>(0);</p>
<p class="p9">g = { 16.do({<span class="s13">|i|</span> m.allNotesOff(i) }) };</p>
<p class="p9"><span class="s13">CmdPeriod</span>.add(g);<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\type<span class="s2">, </span>\midi<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midiout<span class="s2">, m,<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\chan</span>, 0,</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midinote<span class="s2">, </span><span class="s13">PLseq</span><span class="s2">(</span>\seq<span class="s2">) + </span><span class="s13">PL</span><span class="s2">(</span>\seqAdd<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">v = <span class="s13">VarGui</span>([<span class="s14">\seq</span>, [36, 60, <span class="s14">\lin</span>, 1, 36] ! 5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\seqAdd</span>, [0, 12, <span class="s14">\lin</span>, 1, 0],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 1, <span class="s14">\lin</span>, 0.01, 0.8]],</p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: p).gui;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p28">// remove if not needed anymore</p>
<p class="p4"><br></p>
<p class="p9"><span class="s13">CmdPeriod</span>.remove(g);<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 1c:<span class="Apple-converted-space">  </span>more step sequencers, quantization, slider modifiers<span class="Apple-converted-space"> </span></b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// SynthDef from (1a)</p>
<p class="p28">// four players from a Pbind, four varCtr specifications with shifted range</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\synth_1a<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\preAmp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\preAmp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midinote<span class="s2">, </span><span class="s13">PLseq</span><span class="s2">(</span>\seq<span class="s2">) + </span><span class="s13">PL</span><span class="s2">(</span>\seqAdd<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p4"><br></p>
<p class="p9">~spec = 4.collect { <span class="s13">|i|</span> [<span class="s14">\seq</span>, [12*i + 24, 12*i + 48, <span class="s14">\lin</span>, 1, 24*i + 36] ! 5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\seqAdd</span>, [0, 12, <span class="s14">\lin</span>, 1, 0],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.15, <span class="s14">\lin</span>, 0.01, 0.07 - (0.01 * i)],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20]] };</p>
<p class="p9">)<span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p28">// run all players in sync by passing a quant arg</p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p9">v = <span class="s13">VarGui</span>(~spec, stream: p!4, quant: 0.2).gui(tryColumnNum: 2, streamPlayerGroups: [[0,3], [1,2]]);</p>
<p class="p4"><br></p>
<p class="p28">// EventStreamPlayers derived from Pbind are run in four newly generated environments,</p>
<p class="p28">// variables, as their names are passed four times in spec, are automatically set in these Environments in order.</p>
<p class="p28">// Envir index display can be toggled with the button on the right. <span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p28">// get envirs:</p>
<p class="p4"><br></p>
<p class="p9">v.envirs;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p33">// Try slider actions with modifier keys</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p33">// In Qt you can press modifier keys before and thereafter.</p>
<p class="p34">// Caps-lock is currently replaced by Cmd,</p>
<p class="p34">// With the Cmd modifier involved you *have* to press thereafter.</p>
<p class="p4"><br></p>
<p class="p33">// Modifiers allow to control groups of sliders, values in other sliders are clipped to the according range.</p>
<p class="p33">// The following rules apply to synth and var control sliders separately,</p>
<p class="p33">// combined synth and var controls of same name work with Cmd elsewise (Ex.2).</p>
<p class="p4"><br></p>
<p class="p33">// Shift: within an arrayed control all sliders below are set to the handled value or clipped.</p>
<p class="p33">// Shift + Ctrl: within an arrayed control all sliders above are set to the handled value or clipped.</p>
<p class="p4"><br></p>
<p class="p33">// Alt: controls of same name (in different envirs or different synths) are set to the handled value or clipped.</p>
<p class="p33">// Alt + Shift, Alt + Shift + Ctrl: Accordingly for arrayed controls of same name.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p33">// Modifier keys also apply to synth and stream player actions,</p>
<p class="p33">// the following to synth OR stream player combinations either:</p>
<p class="p4"><br></p>
<p class="p33">// Shift: button action with all players<span class="Apple-converted-space"> </span></p>
<p class="p33">// Shift + Ctrl: button action with all players of this state</p>
<p class="p33">// Shift + Alt: button action with all players of this group (if synthPlayerGroups / streamPlayerGroups was defined)</p>
<p class="p33">// Shift + Ctrl + Alt: button action with all players of this state and group ( --- " --- )</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 1d: <span class="Apple-converted-space">  </span>step sequencer, stream players in same environment<span class="Apple-converted-space"> </span></b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// You can try to benefit from eventstream players having variables in common.</p>
<p class="p28">// SynthDef from (1a), second Pbind derived from p without pitch offset as parallel pattern<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\synth_1a<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\preAmp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\preAmp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midinote<span class="s2">, </span><span class="s13">PLseq</span><span class="s2">(</span>\seq<span class="s2">) + </span><span class="s13">PL</span><span class="s2">(</span>\seqAdd<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p4"><br></p>
<p class="p9">q = <span class="s13">Pbindf</span>(p, <span class="s14">\midinote</span>, <span class="s13">PLseq</span>(<span class="s14">\seq</span>));</p>
<p class="p4"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>([<span class="s14">\seq</span>, { [48, 84, <span class="s14">\lin</span>, 1, rrand(48, 84)] } ! 5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\seqAdd</span>, [0, 12, <span class="s14">\lin</span>, 1, 7],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.3, <span class="s14">\lin</span>, 0.01, 0.07],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20]],</p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: [q,p].collect(<span class="s13">_</span>.asESP),<span class="Apple-tab-span">	</span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// so currentEnvironment at build time is given implicitely<span class="Apple-converted-space"> </span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// by both ESPs and used for setting</p>
<p class="p9"><span class="Apple-tab-span">	</span>quant: 1<span class="Apple-tab-span">	</span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// ensures that players, also if started separately<span class="Apple-converted-space"> </span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// for the first time, will play the sequence in sync</p>
<p class="p9"><span class="Apple-tab-span">	</span>).gui;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p28">// stopping and resuming of a single player may break parallelism<span class="Apple-converted-space"> </span></p>
<p class="p28">// Shift-clicked reset syncs again</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 1e: <span class="Apple-converted-space">  </span>step sequencer and replacements with PLx</b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p28">// SynthDef from (1a)</p>
<p class="p4"><br></p>
<p class="p28">// Pbind with PL as placeholder for pitch patterns</p>
<p class="p28">// master VarGui with player</p>
<p class="p28">// start and set seq</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\synth_1a<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\preAmp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\preAmp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\midinote<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\a<span class="s2">) + </span><span class="s13">PL</span><span class="s2">(</span>\seqAdd<span class="s2">),<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// ESP as stream arg: variables will be read from (build time) current Environment.</p>
<p class="p4"><br></p>
<p class="p9">~basePat = <span class="s13">PLseq</span>(<span class="s14">\seq</span>);</p>
<p class="p9">~a = ~basePat;</p>
<p class="p4"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>([<span class="s14">\seq</span>, [36, 60, <span class="s14">\lin</span>, 1, 36] ! 5,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\seqAdd</span>, [0, 12, <span class="s14">\lin</span>, 1, 0],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.1, <span class="s14">\lin</span>, 0.001, 0.05],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20]],</p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: p.asESP).gui(name: <span class="s14">\seq</span>);<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p28">// control spec array builder for midi range<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p32"><span class="s2">~pitchSpec = { </span>|key = \seq, default = 60, step = 1, lo = 24, hi = 96|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">var</span> spec = default.asArray.collect([lo, hi, <span class="s14">\lin</span>, step, <span class="s13">_</span>]);</p>
<p class="p9"><span class="Apple-tab-span">	</span>[key, (spec.size == 1).if { spec.flatten }{ spec }];</p>
<p class="p9">};</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// replace while playing:</p>
<p class="p4"><br></p>
<p class="p28">// chord sequence<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p9">(<span class="Apple-converted-space"> </span></p>
<p class="p9">~chordPat = <span class="s13">PLseq</span>(<span class="s14">\seq</span>) + [0, 7];</p>
<p class="p9">~a = ~chordPat;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// random sequence with new VarGui for lead voice bounds</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9"><span class="s13">VarGui</span>(~pitchSpec.(<span class="s14">\b</span>, [75, 85], 0.01)).gui(name: <span class="s14">\random</span>);</p>
<p class="p4"><br></p>
<p class="p9">~randPat = <span class="s13">Pfunc</span> { rrand(~b[0], ~b[1]) } + [0, -13.3, -17.7];</p>
<p class="p9">~a = ~randPat;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p28">// accumulation sequence with new VarGui<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9"><span class="s13">VarGui</span>(~pitchSpec.(<span class="s14">\accum</span>, { rrand(40,80) }!7 )).gui(name: <span class="s14">\accum</span>);</p>
<p class="p4"><br></p>
<p class="p9">~accPat = <span class="s13">Ptuple</span>( [ <span class="s13">PL</span>(<span class="s14">\accum</span>), <span class="s13">PLseq</span>((0..6)) ] ).collect { <span class="s13">|x|</span> x[0].keep(x[1]) - x[1] };</p>
<p class="p9">~a = ~accPat;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// switch between PLs and set values in VarGui windows</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">~a = ~basePat;</p>
<p class="p4"><br></p>
<p class="p9">~a = ~chordPat;</p>
<p class="p4"><br></p>
<p class="p9">~a = ~randPat;</p>
<p class="p4"><br></p>
<p class="p9">~a = ~accPat;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 2: <span class="Apple-converted-space">  </span>stream players and synths in one VarGui<span class="Apple-converted-space"> </span></b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p28">// Pbind with default synth</p>
<p class="p28">// ~freq can be a collection, then pitch or chord are shifted by ~freqFac,</p>
<p class="p28">// ascending (~step &gt; 0) or descending (~step &lt; 0) groups of 4 items</p>
<p class="p4"><br></p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.4,</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freq</span>, <span class="s13">PL</span>(<span class="s14">\step</span>) ** <span class="s13">PLseq</span>((0..3)) * <span class="s13">PL</span>(<span class="s14">\freq</span>) * <span class="s13">PL</span>(<span class="s14">\freqFac</span>) <span class="Apple-converted-space">   </span></p>
<p class="p9">);</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p28">// Synth producing an ascending line, it ends as envelope params are defined,</p>
<p class="p28">// end notifications will be reflected in the VarGui</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p32">SynthDef<span class="s2">(</span><span class="s14">\synth_2</span><span class="s2">, { </span>|out = 0, freq = #[600, 700, 900, 1000], freqFac = 1,<span class="Apple-converted-space"> </span></p>
<p class="p32"><span class="Apple-tab-span">	</span>amp = 0.1, ampFac = 0.5, preAmp = 5, attTime = 0.2, relTime = 2, susTime = 6|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">var</span> src = <span class="s13">SinOsc</span>.ar(freq * <span class="s13">XLine</span>.kr(freqFac/2, freqFac, attTime + susTime), 0, mul: preAmp).tanh ! 2;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">Out</span>.ar(0, src * amp * ampFac * <span class="s13">EnvGen</span>.ar(<span class="s13">Env</span>.linen(attTime, susTime, relTime), doneAction: 2))</p>
<p class="p9">}).add;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p28">// Try multiple slider movements with modifier keys as described in (1c).</p>
<p class="p28">// As synth args and variables are identically named they can be controlled</p>
<p class="p28">// with linked slider movements using Cmd.</p>
<p class="p4"><br></p>
<p class="p28">// Accordingly stream and synth player buttons can also be pressed in parallel<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">v = <span class="s13">VarGui</span>([<span class="s14">\freq</span>, [600, 700, 900, 1000].collect([400, 1200, <span class="s14">\lin</span>, 0.01, <span class="s13">_</span>]),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqFac</span>, [0.25, 1.25, <span class="s14">\lin</span>, 0.01, 1],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0.0, 0.1, <span class="s14">\lin</span>, 0.001, 0.03],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\step</span>, [0.7, 1.25, <span class="s14">\lin</span>, 0.01, 1.03]] ! 2,<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-converted-space">   </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>[<span class="s14">\freq</span>, [600, 700, 900, 1000].collect([400, 1200, <span class="s14">\lin</span>, 0.01, <span class="s13">_</span>]),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqFac</span>, [0.25, 1.25, <span class="s14">\lin</span>, 0.01, 1],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\attTime</span>, [0.02, 2, <span class="s14">\lin</span>, 0.01, 0.2],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\relTime</span>, [0.02, 2, <span class="s14">\lin</span>, 0.01, 2],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\susTime</span>, [0.1, 10, <span class="s14">\lin</span>, 0.01, 5],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0.0, 0.1, <span class="s14">\lin</span>, 0.001, 0.03],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20]] ! 2,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-converted-space">   </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>p!2, <span class="s14">\synth_2</span> ! 2, quant: 0.4</p>
<p class="p9">).gui(tryColumnNum: 2, allowSynthsBreak: <span class="s13">false</span>, allowEnvirBreak: <span class="s13">false</span> <span class="Apple-converted-space"> </span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span>/*, colorDeviation: 0 */</p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span>/*, sliderPriority: \synth, playerPriority: \synth */</p>
<p class="p9">)<span class="Apple-tab-span">	</span></p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p35"><br></p>
<p class="p26"><b>Example 3: <span class="Apple-converted-space">  </span>granular synthesis with Tasks</b></p>
<p class="p31"><br></p>
<p class="p13"><br></p>
<p class="p20">(</p>
<p class="p19">// Synth definition for single synthesized grains, waveform to be selected by type<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p9"><span class="s13">SynthDef</span>(<span class="s14">\synth_3</span>, { <span class="s13">arg</span> out = 0, freqLo = 1000, freqHi = 10000, amp = 0.1, type = 0, pan;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">var</span> env = <span class="s13">EnvGen</span>.kr(<span class="s13">Env</span>.perc(0.001, 0.003, amp),doneAction:2), freq;</p>
<p class="p9"><span class="Apple-tab-span">	</span>freq = <span class="s13">Rand</span>(freqLo, freqHi);</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s20">OffsetOut</span>.ar(out, <span class="s13">Pan2</span>.ar(<span class="s13">Select</span>.ar(type, [<span class="s13">FSinOsc</span>.ar(freq), <span class="s13">Saw</span>.ar(freq), <span class="s13">Pulse</span>.ar(freq)]), pan) * env)<span class="Apple-converted-space"> </span></p>
<p class="p9">}).add;</p>
<p class="p4"><br></p>
<p class="p28">// Task function definition. Although Tasks can be passed directly to VarGui as stream arg,<span class="Apple-converted-space"> </span></p>
<p class="p28">// Functions have the advantage that the generated Tasks (as EventStreamPlayers with given Pbinds)<span class="Apple-converted-space"> </span></p>
<p class="p28">// will be played in different environments automatically.</p>
<p class="p4"><span class="Apple-converted-space"> </span></p>
<p class="p9">f = {</p>
<p class="p9"><span class="Apple-tab-span">	</span>loop {</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendBundle(0.2, [<span class="s18">"/s_new"</span>,<span class="s18">"synth_3"</span>, -1,0,0,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\out</span>, 0,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\type</span>, ~type,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, ~amp,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\freqLo</span>, ~freqMid / ~freqIntvl.sqrt,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\freqHi</span>, ~freqMid * ~freqIntvl.sqrt,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\pan</span>, [1, -1].choose * ~pan]</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>); <span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[~durShort, ~durLong].choose.wait;</p>
<p class="p9"><span class="Apple-tab-span">	</span>}</p>
<p class="p9">};</p>
<p class="p9">)</p>
<p class="p36"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">v = <span class="s13">VarGui</span>( 3.collect { <span class="s13">|i|</span> [<span class="s14">\type</span>, [0, 2, <span class="s14">\lin</span>, 1, i],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqMid</span>, [100, 8000, <span class="s14">\lin</span>, 1, 500 + (2000 * i)],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqIntvl</span>, [1, 2.0, <span class="s14">\lin</span>, 0.01, 1.4],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0.0, 0.2, <span class="s14">\lin</span>, 0.01, 0.05 * (i + 1)],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\pan</span>, [0.0, 1.0, <span class="s14">\lin</span>, 0.01, 0.8],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\durShort</span>, [0.005, 0.01, <span class="s14">\lin</span>, 0.001, 0.01],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\durLong</span>, [0.01, 0.05, <span class="s14">\lin</span>, 0.001, 0.02]</p>
<p class="p9"><span class="Apple-tab-span">	</span>] },</p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span>//<span class="Apple-converted-space">  </span>f!3 doesn't collect Functions as there is already a short notation for collecting Function values of Integers, e.g. (_*3)!5</p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: 3.collect { f }</p>
<p class="p9">).gui(colorDeviation: 0);</p>
<p class="p9">)</p>
<p class="p36"><br></p>
<p class="p36"><br></p>
<p class="p36"><br></p>
<p class="p26"><b>Example 4a: <span class="Apple-converted-space">  </span>interaction of synth and stream players, control synth controlling pbind synths</b></p>
<p class="p31"><br></p>
<p class="p13"><br></p>
<p class="p19">// Pbind producing a sequence of short events, each pbind-driven synth reading frequency from a control bus</p>
<p class="p13"><br></p>
<p class="p9">(<span class="Apple-converted-space"> </span></p>
<p class="p28">// control synth</p>
<p class="p4"><br></p>
<p class="p32">SynthDef<span class="s2">(</span><span class="s14">\synth_4_kr</span><span class="s2">, {</span>|out = 0, devFreq = 0.5, midiCenter = 60, midiDev = 10|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">Out</span>.kr(out, <span class="s13">LFDNoise3</span>.kr(devFreq, midiDev, midiCenter))</p>
<p class="p9"><span class="Apple-tab-span">	</span>}).add;</p>
<p class="p4"><br></p>
<p class="p28">// audio synth</p>
<p class="p28">// mix of sine and pulse, interval, basic frequency read from control bus<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p32">SynthDef<span class="s2">(</span><span class="s14">\synth_4_ar</span><span class="s2">, {</span>|out = 0, in = 0, soundMix = 0.5, pulseWidth = 0.5, indexLR = 0,</p>
<p class="p32"><span class="Apple-tab-span">	</span>att = 0.005, rel = 0.1, amp = 0.1, midiInt = 3, midiAdd = 0|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">var</span> mix, freq1, freq2, fr;</p>
<p class="p9"><span class="Apple-tab-span">	</span>freq1 = (<span class="s13">In</span>.kr(in, 1) + midiAdd).midicps;</p>
<p class="p9"><span class="Apple-tab-span">	</span>freq2 = freq1 * midiInt.midicps / 0.midicps;</p>
<p class="p9"><span class="Apple-tab-span">	</span>fr = [<span class="s13">Select</span>.kr(indexLR, [freq1, freq2]), <span class="s13">Select</span>.kr(1-indexLR, [freq1, freq2])];</p>
<p class="p9"><span class="Apple-tab-span">	</span>mix = (<span class="s13">SinOsc</span>.ar(fr, 0, amp) * (1 - soundMix)) + (<span class="s13">Pulse</span>.ar(fr, pulseWidth, amp) * soundMix);</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s20">Out</span>.ar(out, <span class="s20">EnvGen</span>.ar(<span class="s20">Env</span>.perc(att, rel), doneAction: 2) * mix)</p>
<p class="p9">}).add;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p10"><span class="s2">x = </span><span class="s13">Pbind</span><span class="s2">(</span>\instrument<span class="s2">, </span>\synth_4_ar<span class="s2">,</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.1,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\in</span>, <span class="s13">PL</span>(<span class="s14">\in</span>),</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midiInt</span>, <span class="s13">Pfunc</span> { rrand(~int[0], ~int[1]) },<span class="Apple-tab-span">	</span><span class="s17">// interval bounds<span class="Apple-tab-span">	</span></span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\rel</span><span class="s2">, </span><span class="s13">Pfunc</span><span class="s2"> { ~rel.choose }, <span class="Apple-tab-span">	</span></span>// short and long release time</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\soundMix</span>, <span class="s13">Pwhite</span>(0.1, 0.9),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\indexLR</span>, <span class="s13">PLrand</span>([0, 1])</p>
<p class="p9">);</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p28">// in GUI start control synth before EventStreamPlayer</p>
<p class="p28">// then try playing with sliders and pausing / resuming the control synth</p>
<p class="p4"><br></p>
<p class="p9">c = <span class="s13">Bus</span>.control(s,1).index;</p>
<p class="p4"><br></p>
<p class="p28"><span class="s13">VarGui</span><span class="s2">([</span><span class="s14">\in</span><span class="s2">, [c, c, </span><span class="s14">\lin</span><span class="s2">, 1, c],<span class="Apple-tab-span">	</span></span>// bus fixed, display only</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\int</span>, [3,4].collect([0, 19, <span class="s14">\lin</span>, 0.1, <span class="s13">_</span>]),<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\rel</span>, [0.01, 0.15].collect([0.01, 0.4, <span class="s14">\lin</span>, 0.005, <span class="s13">_</span>]),<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0.0, 0.3, <span class="s14">\lin</span>, 0.01, 0.15]],</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="Apple-tab-span">	</span>[<span class="s14">\midiCenter</span>, [45, 80, <span class="s14">\lin</span>, 0.1, 70],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midiDev</span>, [0, 20, <span class="s14">\lin</span>, 0.1, 20],<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [0.1, 15, <span class="s14">\lin</span>, 0.1, 1],</p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\out</span><span class="s2">, c],<span class="Apple-tab-span">	</span></span>// bus fixed, display only</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span>x, </span>\synth_4_kr</p>
<p class="p9">).gui(sliderPriority: <span class="s14">\synth</span>, playerPriority: <span class="s14">\synth</span>)</p>
<p class="p9">)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p36"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 4b: <span class="Apple-converted-space">  </span>interaction of synth and stream players, pbind and control synth controlling audio synth</b></p>
<p class="p31"><br></p>
<p class="p13"><br></p>
<p class="p28">// audio synth controlled by LFO pitch synth and a Pbind setting synth args (like Pmono)</p>
<p class="p28">// PLx ListPatterns taken here as they default to repeats = inf</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p10"><span class="s2">y = </span><span class="s13">Pbind</span><span class="s2">(</span>\type<span class="s2">, </span>\set<span class="s2">,</span></p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span>// sequencing of durations and amplitudes quite fixed, just global tempo and amp control</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, <span class="s13">PLshufn</span>([0.15, 0.15, 0.35]) / <span class="s13">PL</span>(<span class="s14">\tempo</span>),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, <span class="s13">PLrand</span>([0.05, 0.12, 0.2]) * <span class="s13">PL</span>(<span class="s14">\amp</span>),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\soundMix</span>, <span class="s13">PLseq</span>([0.1, 0.5, 0.9]),</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\indexLR</span>, <span class="s13">PLrand</span>([0, 1]),</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midiInt</span>, <span class="s13">Pfunc</span> { rrand(0, ~intMax) },</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\args<span class="s2">, [</span>\amp<span class="s2">, </span>\soundMix<span class="s2">, </span>\midiInt<span class="s2">, </span>\indexLR<span class="s2">]<span class="Apple-tab-span">	</span></span><span class="s17">// args to be set must be listed</span></p>
<p class="p9">);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// In GUI start control synth (#0) first, then audio synth (#1) and EventStreamPlayer,</p>
<p class="p28">// then try playing with sliders and pausing / resuming the control synth and EventStreamPlayer.</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9">d = <span class="s13">Bus</span>.control(s,1).index;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s13">VarGui</span>([ <span class="s14">\tempo</span>, [0.7, 1.2, <span class="s14">\lin</span>, 0.01, 1],<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0.0, 1.5, <span class="s14">\lin</span>, 0.01, 0.7],<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\intMax</span>, [-12, 12.0, <span class="s14">\lin</span>, 0.1, 8]],</p>
<p class="p4"><br></p>
<p class="p9"><span class="Apple-tab-span">	</span>[[<span class="s14">\midiCenter</span>, [45, 80, <span class="s14">\lin</span>, 0.1, 60],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midiDev</span>, [0, 20, <span class="s14">\lin</span>, 0.1, 1.5],<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [0.1, 15, <span class="s14">\lin</span>, 0.1, 10],</p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\out</span><span class="s2">, d],<span class="Apple-tab-span">	</span></span>// just display bus indices</p>
<p class="p9"><span class="Apple-tab-span">	</span>[<span class="s14">\in</span>, d,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\out</span>, 0,</p>
<p class="p28"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\rel</span><span class="s2">, 10000]], </span>// ignore Env.perc definition</p>
<p class="p4"><br></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span>y, [</span>\synth_4_kr<span class="s2">,</span>\synth_4_ar<span class="s2">]<span class="Apple-converted-space"> </span></span></p>
<p class="p9">).gui(sliderPriority: <span class="s14">\synth</span>, playerPriority: <span class="s14">\synth</span>)</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p31"><br></p>
<p class="p13"><br></p>
<p class="p26"><b>Example 5a: <span class="Apple-converted-space">  </span>reordering of var control</b></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p19">// One may want to have controls grouped per name, not per Environment (resp. Pbind, Task, Synth),</p>
<p class="p37">// this can be achieved by passing a flat (not grouped) array of specPairs and the appropriate grouping,</p>
<p class="p37">// there are methods implemented for that special case of reordering:</p>
<p class="p13"><br></p>
<p class="p9">(</p>
<p class="p28">// SynthDef from (1a)</p>
<p class="p4"><br></p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\instrument<span class="s2">, </span>\synth_1a<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\preAmp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\preAmp<span class="s2">),<span class="Apple-tab-span">	</span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\amp<span class="s2">, </span><span class="s13">PL</span><span class="s2">(</span>\amp<span class="s2">),</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midinote</span>, <span class="s13">Pfunc</span> { ~midi + rrand(~midiDev.neg, ~midiDev) },<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.2</p>
<p class="p9">);</p>
<p class="p13"><br></p>
<p class="p19">// flat specPairs array without multiple keys</p>
<p class="p13"><br></p>
<p class="p9">~specPairs = [<span class="s14">\midi</span>, [24, 80, <span class="s14">\lin</span>, 1, 36],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\midiDev</span>, [0, 0.5, <span class="s14">\lin</span>, 0.01, 0.25],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.3, <span class="s14">\lin</span>, 0.01, 0.1],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 25]];</p>
<p class="p4"><br></p>
<p class="p28">// get flat expansion of specPairs and appropriate groups</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p9">~specPairsDupped = ~specPairs.specPairsDup(5).postln;</p>
<p class="p9">~specPairsGroups = ~specPairs.specPairsDupGroups(5);</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p19">// parallel slider movement with Alt (not an array here but identically named variables in different envirs)</p>
<p class="p19">// parallel player action with Shift-click</p>
<p class="p13"><br></p>
<p class="p9">(</p>
<p class="p32"><span class="s2">v = </span>VarGui<span class="s2">(</span></p>
<p class="p9"><span class="Apple-tab-span">	</span>~specPairsDupped,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: p!5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>varEnvirGroups: ~specPairsGroups,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>quant: 0.2</p>
<p class="p9">).gui(colorDeviation: 0);</p>
<p class="p9">)</p>
<p class="p13"><br></p>
<p class="p28">// compare implicit mapping by passing a grouped collection of specPairs as varCtr arg</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p32"><span class="s2">v = </span>VarGui<span class="s2">(</span></p>
<p class="p9"><span class="Apple-tab-span">	</span>~specPairs!5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>stream: p!5,<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span>quant: 0.2</p>
<p class="p9">).gui(colorDeviation: 0);</p>
<p class="p9">)</p>
<p class="p13"><br></p>
<p class="p19">// Note that in the case of not connected varEnvirGroups the column break gui option</p>
<p class="p19">// allowEnvirBreak is ignored, means always set to true.</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p26"><b>Example 5b: <span class="Apple-converted-space">  </span>reordering of synth control</b></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p20">(</p>
<p class="p38"><span class="s20">SynthDef</span><span class="s2">(</span><span class="s14">\synth_5b</span><span class="s2">, { </span>|devFactor = 0.1, devFreq = 10, amp = 0.1|</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s21">var</span> freq = <span class="s20">XLine</span>.kr(2000, 400, 3);<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s20">Out</span>.ar(0, <span class="s20">Pan2</span>.ar(<span class="s20">SinOsc</span>.ar(<span class="s20">SinOsc</span>.ar(devFreq, 0, devFactor * freq, freq), mul: amp), <span class="s20">LFDNoise3</span>.ar(2)) * <span class="s20">EnvGate</span>.new)<span class="Apple-converted-space"> </span></p>
<p class="p20">}).add;</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p20">~specPairs = [<span class="s14">\devFactor</span>, [0, 0.99, <span class="s14">\lin</span>, 0.01, 0.5],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [1, 100, <span class="s14">\lin</span>, 0.1, 70],</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.02, <span class="s14">\lin</span>, 0.001, 0.01]];<span class="Apple-tab-span">	</span></p>
<p class="p24"><br></p>
<p class="p23"><span class="s2">~num = 10;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// ~num = 20;<span class="Apple-converted-space">  </span>use gui args sliderHeight and tryColumnNum for larger nums</p>
<p class="p24"><br></p>
<p class="p22"><span class="s2">v = </span>VarGui<span class="s2">(</span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synthCtr: ~specPairs.specPairsDup(~num),<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synth: <span class="s14">\synth_5b</span> ! ~num,</p>
<p class="p20"><span class="Apple-tab-span">	</span>synthCtrGroups: ~specPairs.specPairsDupGroups(~num)</p>
<p class="p20">).gui(colorDeviation: 0 /* ,sliderHeight: 12, tryColumnNum: 2 */);</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p28">// compare implicit mapping by passing a grouped collection of specPairs as synthCtr arg</p>
<p class="p13"><br></p>
<p class="p27">(</p>
<p class="p27">~num = 10;</p>
<p class="p24"><br></p>
<p class="p22"><span class="s2">v = </span>VarGui<span class="s2">(</span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synthCtr: ~specPairs ! ~num,<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synth: <span class="s14">\synth_5b</span> ! ~num</p>
<p class="p20">).gui(colorDeviation: 0);</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p19">// Note that in the case of not connected synthCtrGroups the column break gui option</p>
<p class="p19">// allowSynthBreak is ignored, means always set to true.</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p26"><b>Example 6a: <span class="Apple-converted-space">  </span>non standard usage: passing Synths<span class="Apple-converted-space"> </span></b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p19">// Passing symbols or strings as synth args, refering to known (added) SynthDefs, is recommended</p>
<p class="p19">// However also Synths or nodeIDs can be given, but the player would have to know their state,</p>
<p class="p19">// so Synths should be registered</p>
<p class="p13"><br></p>
<p class="p9">(</p>
<p class="p9"><span class="s13">SynthDef</span>(<span class="s14">\sine</span>, { <span class="s13">|freq = 400, amp = 0.1|</span> <span class="s13">Out</span>.ar(0, <span class="s13">SinOsc</span>.ar(freq, mul: amp)) }).add;</p>
<p class="p9"><span class="s13">SynthDef</span>(<span class="s14">\pulse</span>, { <span class="s13">|freq = 400, amp = 0.1|</span> <span class="s13">Out</span>.ar(0, <span class="s13">Pulse</span>.ar(freq, mul: amp)) }).add;</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p20">(</p>
<p class="p9">x = <span class="s13">Synth</span>(<span class="s14">\sine</span>).register;</p>
<p class="p9">y = <span class="s13">Synth</span>(<span class="s14">\pulse</span>).register;</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p19">// pause pulse<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p9">y.run(<span class="s13">false</span>);</p>
<p class="p13"><br></p>
<p class="p19">// VarGui checks state, definition is known, new Synths of same definition can be started</p>
<p class="p13"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>(synth: [x,y]).gui;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// With nodeIDs or non-registered Synths VarGui demands addtional state info</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">x = { <span class="s13">SinOsc</span>.ar(400, mul: 0.1) }.play;</p>
<p class="p9">y = { <span class="s13">Pulse</span>.ar(700, mul: 0.01) }.play;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p9">y.run(<span class="s13">false</span>);</p>
<p class="p4"><br></p>
<p class="p28">// no new Synths from temporary synth definition</p>
<p class="p4"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>(synth: [x,y], assumePlaying: <span class="s13">true</span>, assumeRunning: [<span class="s13">true</span>, <span class="s13">false</span>]).gui;</p>
<p class="p4"><br></p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p26"><b>Example 6b: <span class="Apple-converted-space">  </span>non standard usage: setting sliders from outside</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p19">/// Synth definition with arrayed control</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p20">(</p>
<p class="p22">SynthDef<span class="s2">(</span><span class="s14">\vibes</span><span class="s2">, { </span>|amp = 0.005, devFactor = 0.1, devFreq = 10, devDisturb = 0.1|<span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s13">var</span> freq = <span class="s14">\midi</span>.kr(20!30).midicps;</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="s13">Out</span>.ar(0, <span class="s13">Mix</span>.fill(30, {<span class="s13">|i|</span> [i.even.if {0}{1}, i.even.if {1}{0}] *<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s13">SinOsc</span>.ar(<span class="s13">SinOsc</span>.ar(devFreq * <span class="s13">LFDNoise3</span>.ar(0.5, devDisturb),<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0, devFactor * freq[i], freq[i]), mul: amp) } ))<span class="Apple-converted-space"> </span></p>
<p class="p20">}).add;</p>
<p class="p20">)<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><br></p>
<p class="p19">// open gui with random midi values first, start playing<span class="Apple-converted-space"> </span></p>
<p class="p13"><br></p>
<p class="p20">(</p>
<p class="p20">v = <span class="s13">VarGui</span>(<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synthCtr: [<span class="s14">\devFactor</span>, [0, 0.01, <span class="s14">\lin</span>, 0.001, 0.005],</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\devFreq</span>, [0, 1, <span class="s14">\lin</span>, 0.01, 0.5],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\devDisturb</span>, [0, 0.99, <span class="s14">\lin</span>, 0.01, 0.1],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.05, <span class="s14">\lin</span>, 0.001, 0.005],</p>
<p class="p20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s14">\midi</span>, 30.collect { [45.0, 95, <span class="s14">\lin</span>, 0.01, rrand(45,95)] }</p>
<p class="p20"><span class="Apple-tab-span">	</span>],<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="Apple-tab-span">	</span>synth: <span class="s14">\vibes</span></p>
<p class="p20">).gui;</p>
<p class="p20">)</p>
<p class="p13"><br></p>
<p class="p13"><br></p>
<p class="p19">// update whole control array with one random value</p>
<p class="p19">// second arg synth index</p>
<p class="p13"><br></p>
<p class="p9">v.updateSynthSliders(<span class="s14">\midi</span>, 0, rrand(50, 80.0)!30);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p19">// update random group, fourth arg start index</p>
<p class="p19">// evaluate several times</p>
<p class="p4"><br></p>
<p class="p9">v.updateSynthSliders(<span class="s14">\midi</span>, 0, rrand(50, 80.0)!5, rrand(0,25));</p>
<p class="p13"><br></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19">// phase shift gui</p>
<p class="p13"><br></p>
<p class="p9">(</p>
<p class="p9">p = <span class="s13">Pbind</span>(</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\dur</span>, 0.07,</p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span></span>\type<span class="s2">, </span>\rest<span class="s2">,</span></p>
<p class="p32"><span class="s2"><span class="Apple-tab-span">	</span></span><span class="s14">\i</span><span class="s2">, </span>Pseries<span class="s2">(),</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\do</span>, <span class="s13">Pfunc</span> { <span class="s13">|e|</span> v.updateSynthSliders(<span class="s14">\midi</span>, 0, (e.i / 5).sin * 25 + 70, e.i % 30) }</p>
<p class="p9">).play(<span class="s13">AppClock</span>)</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p19">// stop updating</p>
<p class="p13"><br></p>
<p class="p9">p.stop;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 6c: <span class="Apple-converted-space">  </span>non standard usage: setting values for plotting</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p28">// By setting a slider hook arbitrary actions can be triggered with lifting a slider handle.</p>
<p class="p28">// A slider hook can e.g. trigger the refreshing of a plot of parametric functions.</p>
<p class="p12"><br></p>
<p class="p9">(</p>
<p class="p9">p = <span class="s13">Plotter</span>(<span class="s18">"move slider to plot"</span>, bounds: <span class="s13">Rect</span>(200, 200, 700, 500));</p>
<p class="p4"><br></p>
<p class="p28">// number of plots in window</p>
<p class="p4"><br></p>
<p class="p9">n = 5;<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p28">// VarGui with random init params</p>
<p class="p4"><br></p>
<p class="p9">v = <span class="s13">VarGui</span>({ [</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\a</span>, { [0, 10, <span class="s14">\lin</span>, 0.01, rrand(0.0, 10)] } ! 2,</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\b</span>, { [0, 10, <span class="s14">\lin</span>, 0.01, rrand(0.0, 10)] } ! 2] } ! n,</p>
<p class="p9"><span class="Apple-tab-span">	</span>envir: () ! n</p>
<p class="p9">).gui;</p>
<p class="p4"><br></p>
<p class="p28">// definition of parametric function, environment of variables will be defined later on</p>
<p class="p4"><br></p>
<p class="p9">f = { <span class="s13">|x|</span> (x * ~a[0]).sin * ~b[0] + ((x * ~a[1]).sin * ~b[1]) };<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p28">// evaluation points</p>
<p class="p4"><br></p>
<p class="p9">x = (0, 0.1..20);</p>
<p class="p4"><br></p>
<p class="p28">// add slider hook, index not defined, everything will be refreshed with arbitrary sliderView mouseUp</p>
<p class="p4"><br></p>
<p class="p9">v.addSliderAction { p.value_(v.envirs.collect { <span class="s13">|e|</span> f.inEnvir(e).(x) }).refresh };</p>
<p class="p4"><br></p>
<p class="p28">// slider movements affecting more than one plot can be achieved with modifier combinations including alt</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 7: <span class="Apple-converted-space">  </span>color grouping</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p28">// By default color grouping is based on logical separations:</p>
<p class="p28">// different synths and environments, different variables and controls, arrays.</p>
<p class="p4"><br></p>
<p class="p28">// But apart of that there might exist more related controls</p>
<p class="p28">// and you'd like to overrule default color grouping.</p>
<p class="p28">// Especially with a large number of sliders a useful color grouping makes</p>
<p class="p28">// control much more convenient (also see examples in <a href="Buffer Granulation.html"><span class="s19">Buffer Granulation</span></a><span class="s3">)</span>.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// SynthDef where freq and amp controls could be grouped</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p32">SynthDef<span class="s2">(</span><span class="s14">\synth_7</span><span class="s2">, { </span>|freq = 400, freqOsc = 10, freqDev = 0.03, preAmp = 5, amp = 0.1|</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">var</span> src = <span class="s13">SinOsc</span>.ar(<span class="s13">SinOsc</span>.ar(freqOsc, 0, freqDev * freq, freq), 0, mul: preAmp).tanh ! 2;</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s13">Out</span>.ar(0, src * amp * <span class="s13">EnvGate</span>())</p>
<p class="p9">}).add;</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// The clumps method is fine for grouping</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">~g = (0..4).clumps([3,2]);</p>
<p class="p4"><br></p>
<p class="p9">~synthCtr = [</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freq</span>, [20, 5000, <span class="s14">\exp</span>, 0, 80],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqOsc</span>, [0, 20.0, <span class="s14">\lin</span>, 0, 10],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\freqDev</span>, [0, 0.5, <span class="s14">\lin</span>, 0, 0.03],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\preAmp</span>, [5, 50, <span class="s14">\lin</span>, 0.01, 20],</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="s14">\amp</span>, [0, 0.2, <span class="s14">\lin</span>, 0.01, 0.03]</p>
<p class="p9">];</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// GUI with one Synth</p>
<p class="p4"><br></p>
<p class="p9"><span class="s13">VarGui</span>(synth: <span class="s14">\synth_7</span>, synthCtr: ~synthCtr).gui(synthColorGroups: ~g);<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// GUI with two Synths and separate colors for the second</p>
<p class="p4"><br></p>
<p class="p9"><span class="s13">VarGui</span>(synth: <span class="s14">\synth_7</span>!2, synthCtr: ~synthCtr!2).gui(synthColorGroups: ~g+5 ++ ~g);<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p28">// Duplicating colors</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p28"><span class="s2">~h = [~g, ~g+5].flop.collect(</span><span class="s13">_</span><span class="s2">.flat);<span class="Apple-converted-space">  </span></span>// or ~h = ~g.collect { |x| x + 5 ++ x };</p>
<p class="p4"><br></p>
<p class="p9"><span class="s13">VarGui</span>(synth: <span class="s14">\synth_7</span>!2, synthCtr: ~synthCtr!2).gui(synthColorGroups: ~h);<span class="Apple-tab-span">	</span></p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 8: <span class="Apple-converted-space">  </span>EZSmoothSlider, EZRoundSlider</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p39">// EZSlider is used as default slider type.</p>
<p class="p39">// With wslib installed (Quark) you can choose<span class="Apple-converted-space"> </span></p>
<p class="p39">// its slider types EZSmoothSlider and EZRoundSlider<span class="Apple-converted-space"> </span></p>
<p class="p39">// as gui option<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>(synth: <span class="s14">\default</span>).gui(sliderType: <span class="s14">\smooth</span>);<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>(synth: <span class="s14">\default</span>).gui(sliderType: <span class="s14">\round</span>);<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// you can choose from their modes \jump (\default) or \move as general option</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>(synth: <span class="s14">\default</span>).gui(sliderType: <span class="s14">\smooth</span>, sliderMode: <span class="s14">\move</span>);<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// if you want to set individually you can refer to sliders directly</p>
<p class="p39">// compare different slider behaviour of Synth 0 and 1</p>
<p class="p4"><br></p>
<p class="p9">(</p>
<p class="p9">v = <span class="s22">VarGui</span>(synth: <span class="s14">\default</span>!2).gui(sliderType: <span class="s14">\smooth</span>, sliderMode: <span class="s14">\move</span>);</p>
<p class="p4"><br></p>
<p class="p9">v.synthCtrSliders.first.sliderView.mode_(<span class="s14">\jump</span>)</p>
<p class="p9">)</p>
<p class="p4"><br></p>
<p class="p39">// For multiple slider handling see Ex 1c.</p>
<p class="p40"><br></p>
<p class="p39">// Very small numbers are forced to exponential notation (see also Ex. 9).</p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 9: <span class="Apple-converted-space">  </span>slider step precision</b></p>
<p class="p31"><br></p>
<p class="p31"><br></p>
<p class="p41">// VarGui makes some adaptions concerning slider step sizes and rounding</p>
<p class="p41">// depending on passed controlspec step size</p>
<p class="p41">// in order to unify slightly different behaviour of GUI kits</p>
<p class="p41">// and set parameters automatically also for very small step sizes.</p>
<p class="p4"><br></p>
<p class="p41">// For this reason (and because of multiple slider handling)<span class="Apple-converted-space"> </span></p>
<p class="p41">// scaling by modifiers is disabled by default.</p>
<p class="p41">// You can have a finer control by moving the mouse over the NumberBox,</p>
<p class="p41">// this also works with modifiers for multiple sliders (Ex.1c, Ex.2).</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1, <span class="s14">\lin</span>, 0.1, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1, <span class="s14">\lin</span>, 0.01, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1, <span class="s14">\lin</span>, 0.001, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 100, <span class="s14">\lin</span>, 1, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 10000, <span class="s14">\lin</span>, 10, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 10000, <span class="s14">\lin</span>, 100, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// controlspec step = 0 causes division of range by 100</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1, <span class="s14">\lin</span>, 0, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 0.1, <span class="s14">\lin</span>, 0, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1000, <span class="s14">\lin</span>, 0, 0]]).gui;</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// division parameter can be changed</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 1000, <span class="s14">\lin</span>, 0, 0]]).gui(stepEqualZeroDiv: 10);</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 0.1, <span class="s14">\lin</span>, 0, 0]]).gui(stepEqualZeroDiv: 10);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// in case of very long numbers it may be necessary to adapt numberWidth</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [0, 0.001, <span class="s14">\lin</span>, 0, 0]]).gui(numberWidth: 70);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// In general ranges are adapted to step size if necessary -<span class="Apple-converted-space"> </span></p>
<p class="p39">// this is ControlSpec's standard behaviour</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [1000, 5000, <span class="s14">\lin</span>, 1000.001, 0]]).gui(numberWidth: 70);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// a rather exotic option:<span class="Apple-converted-space"> </span></p>
<p class="p39">// precisionSpan defaults to 10 and fails here ...</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [10000000, 50000000, <span class="s14">\lin</span>, 10000000.001, 0]]).gui(numberWidth: 100);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p39">// ... but resolves this</p>
<p class="p4"><br></p>
<p class="p9"><span class="s22">VarGui</span>([<span class="s14">\a</span>, [10000000, 50000000, <span class="s14">\lin</span>, 10000000.001, 0]]).gui(precisionSpan: 12, numberWidth: 100);</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p26"><b>Example 10: <span class="Apple-converted-space">  </span>MIDI learn functionality with sliders</b></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p33">// Connect your midi device, maybe you have to restart SC then.</p>
<p class="p33">// As gui example e.g. take SynthDefs and Pbind x from (4a), evaluate both code blocks.</p>
<p class="p33">// It must be possible to refer to the VarGui instance (e.g. v = VarGui(...))</p>
<p class="p4"><br></p>
<p class="p33">// start MIDI</p>
<p class="p4"><br></p>
<p class="p9"><span class="s23">MIDIIn</span>.connectAll</p>
<p class="p4"><br></p>
<p class="p33">// on your device define desired knobs, faders etc. to send cc messages</p>
<p class="p33">// probably you want to control different parameters, so define different cc numbers</p>
<p class="p42"><span class="Apple-converted-space"> </span></p>
<p class="p33">// start learning mode</p>
<p class="p4"><br></p>
<p class="p9">v.startMIDIlearn</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p33">// now assignment can happen by selecting a VarGui slider box</p>
<p class="p33">// it gets a focus (blue border, sometimes not very well visible)</p>
<p class="p33">// then send midi cc with the fader/knob of your choice</p>
<p class="p33">// sending data with different cc number, while the same slider is still or again selected, will overwrite</p>
<p class="p4"><br></p>
<p class="p33">// end of learning has to be defined</p>
<p class="p4"><br></p>
<p class="p9">v.stopMIDIlearn</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p33">// adaption of control can be done by recalling the learning mode</p>
<p class="p4"><br></p>
<p class="p9">v.startMIDIlearn</p>
<p class="p4"><br></p>
<p class="p9">...</p>
<p class="p4"><br></p>
<p class="p9">v.stopMIDIlearn</p>
<p class="p43"><br></p>
<p class="p43"><br></p>
</body>
</html>
